{
  "default": {
    "cguid": 40001,
    "type": "ProtoStubs",
    "version": "0.1",
    "description": "Description of VertxProtoStub2",
    "objectName": "VertxProtoStub2",
    "sourcePackageURL": "/sourcePackage",
    "sourcePackage": {
      "sourceCode": "J3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmICgidmFsdWUiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7IC8qKgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBQVCBJbm92YcOnw6NvIGUgU2lzdGVtYXMgU0EKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgSU5FU0MtSUQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogQ29weXJpZ2h0IDIwMTYgUVVPQklTIE5FVFdPUktTIFNMCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IEZSQVVOSE9GRVItR0VTRUxMU0NIQUZUIFpVUiBGT0VSREVSVU5HIERFUiBBTkdFV0FORFRFTiBGT1JTQ0hVTkcgRS5WCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IE9SQU5HRSBTQQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBEZXV0c2NoZSBUZWxla29tIEFHCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIENvcHlyaWdodCAyMDE2IEFwaXplZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBDb3B5cmlnaHQgMjAxNiBURUNITklTQ0hFIFVOSVZFUlNJVEFUIEJFUkxJTgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICoqLwoKZXhwb3J0cy5kZWZhdWx0ID0gYWN0aXZhdGU7Cgp2YXIgX3dzID0gcmVxdWlyZSgnd3MnKTsKCnZhciBfd3MyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfd3MpOwoKZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH0KCmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcigiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uIik7IH0gfQoKdmFyIFZlcnR4UHJvdG9TdHViID0gZnVuY3Rpb24gKCkgewogIC8qIHByaXZhdGUKICAgIF9jb250aW51b3VzT3BlbjogYm9vbGVhbgogICAgIF9ydW50aW1lUHJvdG9TdHViVVJMOiBzdHJpbmcKICAgIF9idXM6IE1pbmlCdXMKICAgIF9tc2dDYWxsYmFjazogKE1lc3NhZ2UpID0+IHZvaWQKICAgIF9jb25maWc6IHsgdXJsLCBydW50aW1lVVJMIH0KICAgICBfc29jazogKFdlYlNvY2tldCB8IFNvY2tKUykKICAgIF9yZU9wZW46IGJvb2xlYW4KICAqLwoKICAvKioKICAgKiBWZXJ0eCBQcm90b1N0dWIgY3JlYXRpb24KICAgKiBAcGFyYW0gIHtzdHJpbmd9IHJ1bnRpbWVQcm90b1N0dWJVUkwgLSBVUkwgdXNlZCBpbnRlcm5hbGx5IGZvciBtZXNzYWdlIGRlbGl2ZXJ5IHBvaW50LiBOb3QgdXNlZCBmb3IgTWVzc2FnZU5vZGUgZGVsaXZlci4KICAgKiBAcGFyYW0gIHtNaW5pQnVzfSBidXMgLSBNaW5pQnVzIHVzZWQgdG8gc2VuZC9yZWNlaXZlIG1lc3NhZ2VzLiBOb3JtYWxseSBjb25uZWN0ZWQgdG8gdGhlIE1lc3NhZ2VCdXMuCiAgICogQHBhcmFtICB7T2JqZWN0fSBjb25maWcgLSBNYW5kYXRvcnkgZmllbGRzIGFyZTogInVybCIgb2YgdGhlIE1lc3NhZ2VOb2RlIGFkZHJlc3MgYW5kICJydW50aW1lVVJMIi4KICAgKiBAcmV0dXJuIHtWZXJ0eFByb3RvU3R1Yn0KICAgKi8KICBmdW5jdGlvbiBWZXJ0eFByb3RvU3R1YihydW50aW1lUHJvdG9TdHViVVJMLCBidXMsIGNvbmZpZykgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFZlcnR4UHJvdG9TdHViKTsKCiAgICBpZiAoIXJ1bnRpbWVQcm90b1N0dWJVUkwpIHRocm93IG5ldyBFcnJvcignVGhlIHJ1bnRpbWVQcm90b1N0dWJVUkwgaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7CiAgICBpZiAoIWJ1cykgdGhyb3cgbmV3IEVycm9yKCdUaGUgYnVzIGlzIGEgbmVlZGVkIHBhcmFtZXRlcicpOwogICAgaWYgKCFjb25maWcpIHRocm93IG5ldyBFcnJvcignVGhlIGNvbmZpZyBpcyBhIG5lZWRlZCBwYXJhbWV0ZXInKTsKCiAgICBpZiAoIWNvbmZpZy51cmwpIHRocm93IG5ldyBFcnJvcignVGhlIGNvbmZpZy51cmwgaXMgYSBuZWVkZWQgcGFyYW1ldGVyJyk7CiAgICBpZiAoIWNvbmZpZy5ydW50aW1lVVJMKSB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjb25maWcucnVudGltZVVSTCBpcyBhIG5lZWRlZCBwYXJhbWV0ZXInKTsKCiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHRoaXMuX2lkID0gMDsKICAgIHRoaXMuX2NvbnRpbnVvdXNPcGVuID0gdHJ1ZTsKCiAgICB0aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMID0gcnVudGltZVByb3RvU3R1YlVSTDsKICAgIHRoaXMuX2J1cyA9IGJ1czsKICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZzsKCiAgICB0aGlzLl9ydW50aW1lU2Vzc2lvblVSTCA9IGNvbmZpZy5ydW50aW1lVVJMOwogICAgdGhpcy5fcmVPcGVuID0gZmFsc2U7CgogICAgYnVzLmFkZExpc3RlbmVyKCcqJywgZnVuY3Rpb24gKG1zZykgewogICAgICBfdGhpcy5fb3BlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKF90aGlzLl9maWx0ZXIobXNnKSkgewogICAgICAgICAgX3RoaXMuX3NvY2suc2VuZChKU09OLnN0cmluZ2lmeShtc2cpKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAgfQoKICAvKioKICAgKiBHZXQgdGhlIGNvbmZpZ3VyYXRpb24gZm9yIHRoaXMgUHJvdG9TdHViCiAgICogQHJldHVybiB7T2JqZWN0fSAtIE1hbmRhdG9yeSBmaWVsZHMgYXJlOiAidXJsIiBvZiB0aGUgTWVzc2FnZU5vZGUgYWRkcmVzcyBhbmQgInJ1bnRpbWVVUkwiLgogICAqLwoKCiAgX2NyZWF0ZUNsYXNzKFZlcnR4UHJvdG9TdHViLCBbewogICAga2V5OiAnY29ubmVjdCcsCgoKICAgIC8qKgogICAgICogVHJ5IHRvIG9wZW4gdGhlIGNvbm5lY3Rpb24gdG8gdGhlIE1lc3NhZ2VOb2RlLiBDb25uZWN0aW9uIGlzIGF1dG8gbWFuYWdlZCwgdGhlcmUgaXMgbm8gbmVlZCB0byBjYWxsIHRoaXMgZXhwbGljaXRseS4KICAgICAqIEhvd2V2ZXIsIGlmICJkaXNjb25uZWN0KCkiIGlzIGNhbGxlZCwgaXQncyBuZWNlc3NhcnkgdG8gY2FsbCB0aGlzIHRvIGVuYWJsZSBjb25uZWN0aW9ucyBhZ2Fpbi4KICAgICAqIEEgc3RhdHVzIG1lc3NhZ2UgaXMgc2VudCB0byAicnVudGltZVByb3RvU3R1YlVSTC9zdGF0dXMiLCBjb250YWluaW5nIHRoZSB2YWx1ZSAiY29ubmVjdGVkIiBpZiBzdWNjZXNzZnVsLCBvciAiZGlzY29ubmVjdGVkIiBpZiBzb21lIGVycm9yIG9jY3Vycy4KICAgICAqLwogICAgdmFsdWU6IGZ1bmN0aW9uIGNvbm5lY3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fY29udGludW91c09wZW4gPSB0cnVlOwogICAgICBfdGhpcy5fb3BlbihmdW5jdGlvbiAoKSB7fSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBJdCB3aWxsIGRpc2Nvbm5lY3QgYW5kIG9yZGVyIHRvIHN0YXkgZGlzY29ubmVjdGVkLiBSZWNvbm5lY3Rpb24gdHJpZXMsIHdpbGwgbm90IGJlIGF0dGVtcHRlZCwgdW5sZXNzICJjb25uZWN0KCkiIGlzIGNhbGxlZC4KICAgICAqIEEgc3RhdHVzIG1lc3NhZ2UgaXMgc2VudCB0byAicnVudGltZVByb3RvU3R1YlVSTC9zdGF0dXMiIHdpdGggdmFsdWUgImRpc2Nvbm5lY3RlZCIuCiAgICAgKi8KCiAgfSwgewogICAga2V5OiAnZGlzY29ubmVjdCcsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGlzY29ubmVjdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLl9jb250aW51b3VzT3BlbiA9IGZhbHNlOwogICAgICBpZiAoX3RoaXMuX3NvY2spIHsKICAgICAgICBfdGhpcy5fc2VuZENsb3NlKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdfc2VuZE9wZW4nLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9zZW5kT3BlbihjYWxsYmFjaykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuX2lkKys7CiAgICAgIHZhciBtc2cgPSB7CiAgICAgICAgaWQ6IF90aGlzLl9pZCwgdHlwZTogJ29wZW4nLCBmcm9tOiBfdGhpcy5fcnVudGltZVNlc3Npb25VUkwsIHRvOiAnbW46L3Nlc3Npb24nCiAgICAgIH07CgogICAgICBpZiAoX3RoaXMuX3JlT3BlbikgewogICAgICAgIG1zZy50eXBlID0gJ3JlLW9wZW4nOwogICAgICB9CgogICAgICAvL3JlZ2lzdGVyIGFuZCB3YWl0IGZvciBvcGVuIHJlcGx5Li4uCiAgICAgIHZhciBoYXNSZXNwb25zZSA9IGZhbHNlOwogICAgICBfdGhpcy5fc2Vzc2lvbkNhbGxiYWNrID0gZnVuY3Rpb24gKHJlcGx5KSB7CiAgICAgICAgaWYgKHJlcGx5LnR5cGUgPT09ICdyZXNwb25zZScgJiByZXBseS5pZCA9PT0gbXNnLmlkKSB7CiAgICAgICAgICBoYXNSZXNwb25zZSA9IHRydWU7CiAgICAgICAgICBpZiAocmVwbHkuYm9keS5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgaWYgKHJlcGx5LmJvZHkucnVudGltZVRva2VuKSB7CiAgICAgICAgICAgICAgLy9zZXR1cCBydW50aW1lU2Vzc2lvbgogICAgICAgICAgICAgIF90aGlzLl9yZU9wZW4gPSB0cnVlOwogICAgICAgICAgICAgIF90aGlzLl9ydW50aW1lU2Vzc2lvblVSTCA9IF90aGlzLl9jb25maWcucnVudGltZVVSTCArICcvJyArIHJlcGx5LmJvZHkucnVudGltZVRva2VuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfdGhpcy5fc2VuZFN0YXR1cygnY29ubmVjdGVkJyk7CiAgICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy5fc2VuZFN0YXR1cygnZGlzY29ubmVjdGVkJywgcmVwbHkuYm9keS5kZXNjKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CgogICAgICBfdGhpcy5fc29jay5zZW5kKEpTT04uc3RyaW5naWZ5KG1zZykpOwogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoIWhhc1Jlc3BvbnNlKSB7CiAgICAgICAgICAvL25vIHJlc3BvbnNlIGFmdGVyIHggc2Vjb25kcy4uLgogICAgICAgICAgX3RoaXMuX3NlbmRTdGF0dXMoJ2Rpc2Nvbm5lY3RlZCcsICdUaW1lb3V0IGZyb20gbW46L3Nlc3Npb24nKTsKICAgICAgICB9CiAgICAgIH0sIDMwMDApOwogICAgfQogIH0sIHsKICAgIGtleTogJ19zZW5kQ2xvc2UnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9zZW5kQ2xvc2UoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5faWQrKzsKICAgICAgdmFyIG1zZyA9IHsKICAgICAgICBpZDogX3RoaXMuX2lkLCB0eXBlOiAnY2xvc2UnLCBmcm9tOiBfdGhpcy5fcnVudGltZVNlc3Npb25VUkwsIHRvOiAnbW46L3Nlc3Npb24nCiAgICAgIH07CgogICAgICAvL2ludmFsaWRhdGUgcnVudGltZVNlc3Npb24KICAgICAgX3RoaXMuX3JlT3BlbiA9IGZhbHNlOwogICAgICBfdGhpcy5fcnVudGltZVNlc3Npb25VUkwgPSBfdGhpcy5fY29uZmlnLl9ydW50aW1lVVJMOwoKICAgICAgX3RoaXMuX3NvY2suc2VuZChKU09OLnN0cmluZ2lmeShtc2cpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfc2VuZFN0YXR1cycsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3NlbmRTdGF0dXModmFsdWUsIHJlYXNvbikgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIG1zZyA9IHsKICAgICAgICB0eXBlOiAndXBkYXRlJywKICAgICAgICBmcm9tOiBfdGhpcy5fcnVudGltZVByb3RvU3R1YlVSTCwKICAgICAgICB0bzogX3RoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwgKyAnL3N0YXR1cycsCiAgICAgICAgYm9keTogewogICAgICAgICAgdmFsdWU6IHZhbHVlCiAgICAgICAgfQogICAgICB9OwoKICAgICAgaWYgKHJlYXNvbikgewogICAgICAgIG1zZy5ib2R5LmRlc2MgPSByZWFzb247CiAgICAgIH0KCiAgICAgIF90aGlzLl9idXMucG9zdE1lc3NhZ2UobXNnKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfd2FpdFJlYWR5JywKICAgIHZhbHVlOiBmdW5jdGlvbiBfd2FpdFJlYWR5KGNhbGxiYWNrKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoX3RoaXMuX3NvY2sucmVhZHlTdGF0ZSA9PT0gMSkgewogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpcy5fd2FpdFJlYWR5KGNhbGxiYWNrKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ19maWx0ZXInLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9maWx0ZXIobXNnKSB7CiAgICAgIGlmIChtc2cuYm9keSAmJiBtc2cuYm9keS52aWEgPT09IHRoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwpIHJldHVybiBmYWxzZTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfSwgewogICAga2V5OiAnX2RlbGl2ZXInLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9kZWxpdmVyKG1zZykgewogICAgICBpZiAoIW1zZy5ib2R5KSBtc2cuYm9keSA9IHt9OwoKICAgICAgbXNnLmJvZHkudmlhID0gdGhpcy5fcnVudGltZVByb3RvU3R1YlVSTDsKICAgICAgdGhpcy5fYnVzLnBvc3RNZXNzYWdlKG1zZyk7CiAgICB9CiAgfSwgewogICAga2V5OiAnX29wZW4nLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vcGVuKGNhbGxiYWNrKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAoIXRoaXMuX2NvbnRpbnVvdXNPcGVuKSB7CiAgICAgICAgLy9UT0RPOiBzZW5kIHN0YXR1cyAoc2VudCBtZXNzYWdlIGVycm9yIC0gZGlzY29ubmVjdGVkKQogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKCFfdGhpcy5fc29jaykgewogICAgICAgIGlmIChfdGhpcy5fY29uZmlnLnVybC5zdWJzdHJpbmcoMCwgMikgPT09ICd3cycpIHsKICAgICAgICAgIF90aGlzLl9zb2NrID0gbmV3IF93czIuZGVmYXVsdChfdGhpcy5fY29uZmlnLnVybCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzLl9zb2NrID0gbmV3IFNvY2tKUyhfdGhpcy5fY29uZmlnLnVybCk7CiAgICAgICAgfQoKICAgICAgICBfdGhpcy5fc29jay5vbm9wZW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpcy5fc2VuZE9wZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgX3RoaXMuX3NvY2sub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHZhciBtc2cgPSBKU09OLnBhcnNlKGUuZGF0YSk7CiAgICAgICAgICBpZiAobXNnLmZyb20gPT09ICdtbjovc2Vzc2lvbicpIHsKICAgICAgICAgICAgaWYgKF90aGlzLl9zZXNzaW9uQ2FsbGJhY2spIHsKICAgICAgICAgICAgICBfdGhpcy5fc2Vzc2lvbkNhbGxiYWNrKG1zZyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzLl9kZWxpdmVyKG1zZyk7CiAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgX3RoaXMuX3NvY2sub25jbG9zZSA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgdmFyIHJlYXNvbiA9IHZvaWQgMDsKCiAgICAgICAgICAvL1NlZSBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjQ1NSNzZWN0aW9uLTcuNAogICAgICAgICAgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDApIHsKICAgICAgICAgICAgcmVhc29uID0gJ05vcm1hbCBjbG9zdXJlLCBtZWFuaW5nIHRoYXQgdGhlIHB1cnBvc2UgZm9yIHdoaWNoIHRoZSBjb25uZWN0aW9uIHdhcyBlc3RhYmxpc2hlZCBoYXMgYmVlbiBmdWxmaWxsZWQuJzsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAwMSkgewogICAgICAgICAgICByZWFzb24gPSAnQW4gZW5kcG9pbnQgaXMgXCdnb2luZyBhd2F5XCcsIHN1Y2ggYXMgYSBzZXJ2ZXIgZ29pbmcgZG93biBvciBhIGJyb3dzZXIgaGF2aW5nIG5hdmlnYXRlZCBhd2F5IGZyb20gYSBwYWdlLic7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDIpIHsKICAgICAgICAgICAgcmVhc29uID0gJ0FuIGVuZHBvaW50IGlzIHRlcm1pbmF0aW5nIHRoZSBjb25uZWN0aW9uIGR1ZSB0byBhIHByb3RvY29sIGVycm9yJzsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAwMykgewogICAgICAgICAgICByZWFzb24gPSAnQW4gZW5kcG9pbnQgaXMgdGVybWluYXRpbmcgdGhlIGNvbm5lY3Rpb24gYmVjYXVzZSBpdCBoYXMgcmVjZWl2ZWQgYSB0eXBlIG9mIGRhdGEgaXQgY2Fubm90IGFjY2VwdCAoZS5nLiwgYW4gZW5kcG9pbnQgdGhhdCB1bmRlcnN0YW5kcyBvbmx5IHRleHQgZGF0YSBNQVkgc2VuZCB0aGlzIGlmIGl0IHJlY2VpdmVzIGEgYmluYXJ5IG1lc3NhZ2UpLic7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDQpIHsKICAgICAgICAgICAgcmVhc29uID0gJ1Jlc2VydmVkLiBUaGUgc3BlY2lmaWMgbWVhbmluZyBtaWdodCBiZSBkZWZpbmVkIGluIHRoZSBmdXR1cmUuJzsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAwNSkgewogICAgICAgICAgICByZWFzb24gPSAnTm8gc3RhdHVzIGNvZGUgd2FzIGFjdHVhbGx5IHByZXNlbnQuJzsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAwNikgewogICAgICAgICAgICByZWFzb24gPSAnVGhlIGNvbm5lY3Rpb24gd2FzIGNsb3NlZCBhYm5vcm1hbGx5LCBlLmcuLCB3aXRob3V0IHNlbmRpbmcgb3IgcmVjZWl2aW5nIGEgQ2xvc2UgY29udHJvbCBmcmFtZSc7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDcpIHsKICAgICAgICAgICAgcmVhc29uID0gJ0FuIGVuZHBvaW50IGlzIHRlcm1pbmF0aW5nIHRoZSBjb25uZWN0aW9uIGJlY2F1c2UgaXQgaGFzIHJlY2VpdmVkIGRhdGEgd2l0aGluIGEgbWVzc2FnZSB0aGF0IHdhcyBub3QgY29uc2lzdGVudCB3aXRoIHRoZSB0eXBlIG9mIHRoZSBtZXNzYWdlIChlLmcuLCBub24tVVRGLTggW2h0dHA6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzM2MjldIGRhdGEgd2l0aGluIGEgdGV4dCBtZXNzYWdlKS4nOwogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDA4KSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdBbiBlbmRwb2ludCBpcyB0ZXJtaW5hdGluZyB0aGUgY29ubmVjdGlvbiBiZWNhdXNlIGl0IGhhcyByZWNlaXZlZCBhIG1lc3NhZ2UgdGhhdCAidmlvbGF0ZXMgaXRzIHBvbGljeSIuIFRoaXMgcmVhc29uIGlzIGdpdmVuIGVpdGhlciBpZiB0aGVyZSBpcyBubyBvdGhlciBzdXRpYmxlIHJlYXNvbiwgb3IgaWYgdGhlcmUgaXMgYSBuZWVkIHRvIGhpZGUgc3BlY2lmaWMgZGV0YWlscyBhYm91dCB0aGUgcG9saWN5Lic7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDkpIHsKICAgICAgICAgICAgcmVhc29uID0gJ0FuIGVuZHBvaW50IGlzIHRlcm1pbmF0aW5nIHRoZSBjb25uZWN0aW9uIGJlY2F1c2UgaXQgaGFzIHJlY2VpdmVkIGEgbWVzc2FnZSB0aGF0IGlzIHRvbyBiaWcgZm9yIGl0IHRvIHByb2Nlc3MuJzsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAxMCkgewogICAgICAgICAgICByZWFzb24gPSAnQW4gZW5kcG9pbnQgKGNsaWVudCkgaXMgdGVybWluYXRpbmcgdGhlIGNvbm5lY3Rpb24gYmVjYXVzZSBpdCBoYXMgZXhwZWN0ZWQgdGhlIHNlcnZlciB0byBuZWdvdGlhdGUgb25lIG9yIG1vcmUgZXh0ZW5zaW9uLCBidXQgdGhlIHNlcnZlciBkaWRuXCd0IHJldHVybiB0aGVtIGluIHRoZSByZXNwb25zZSBtZXNzYWdlIG9mIHRoZSBXZWJTb2NrZXQgaGFuZHNoYWtlLiA8YnIgLz4gU3BlY2lmaWNhbGx5LCB0aGUgZXh0ZW5zaW9ucyB0aGF0IGFyZSBuZWVkZWQgYXJlOiAnICsgZXZlbnQucmVhc29uOwogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDExKSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdBIHNlcnZlciBpcyB0ZXJtaW5hdGluZyB0aGUgY29ubmVjdGlvbiBiZWNhdXNlIGl0IGVuY291bnRlcmVkIGFuIHVuZXhwZWN0ZWQgY29uZGl0aW9uIHRoYXQgcHJldmVudGVkIGl0IGZyb20gZnVsZmlsbGluZyB0aGUgcmVxdWVzdC4nOwogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDE1KSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdUaGUgY29ubmVjdGlvbiB3YXMgY2xvc2VkIGR1ZSB0byBhIGZhaWx1cmUgdG8gcGVyZm9ybSBhIFRMUyBoYW5kc2hha2UgKGUuZy4sIHRoZSBzZXJ2ZXIgY2VydGlmaWNhdGUgY2FuXCd0IGJlIHZlcmlmaWVkKS4nOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmVhc29uID0gJ1Vua25vd24gcmVhc29uJzsKICAgICAgICAgIH0KCiAgICAgICAgICBkZWxldGUgX3RoaXMuX3NvY2s7CiAgICAgICAgICBfdGhpcy5fc2VuZFN0YXR1cygnZGlzY29ubmVjdGVkJywgcmVhc29uKTsKICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIF90aGlzLl93YWl0UmVhZHkoY2FsbGJhY2spOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnY29uZmlnJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fY29uZmlnOwogICAgfQogIH0sIHsKICAgIGtleTogJ3J1bnRpbWVTZXNzaW9uJywKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdGhpcy5fcnVudGltZVNlc3Npb25VUkw7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gVmVydHhQcm90b1N0dWI7Cn0oKTsKCmZ1bmN0aW9uIGFjdGl2YXRlKHVybCwgYnVzLCBjb25maWcpIHsKICByZXR1cm4gewogICAgbmFtZTogJ1ZlcnR4UHJvdG9TdHViJywKICAgIGluc3RhbmNlOiBuZXcgVmVydHhQcm90b1N0dWIodXJsLCBidXMsIGNvbmZpZykKICB9Owp9CgovKioKKiBDYWxsYmFjayB1c2VkIHRvIHNlbmQgbWVzc2FnZXMKKiBAY2FsbGJhY2sgUG9zdE1lc3NhZ2UKKiBAcGFyYW0ge01lc3NhZ2V9IG1zZyAtIE1lc3NhZ2UgdG8gc2VuZAoqLw==",
      "sourceCodeClassname": "VertxProtoStub2",
      "encoding": "base64",
      "signature": ""
    },
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "configuration": {
      "url": "wss://msg-node.hybroker.rethink.ptinovacao.pt/ws"
    },
    "constraints": "",
    "hypertyCapabilities": "",
    "protocolCapabilities": "",
    "policies": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy"
  },
  "rethink.quobis.com": {
    "cguid": 40002,
    "type": "ProtoStubs",
    "version": "0.1",
    "description": "Description of VertxProtoStub",
    "objectName": "VertxProtoStub",
    "sourcePackageURL": "/sourcePackage",
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewoidXNlIHN0cmljdCI7CgooZnVuY3Rpb24gKGYpIHsKICBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICJvYmplY3QiICYmIHR5cGVvZiBtb2R1bGUgIT09ICJ1bmRlZmluZWQiKSB7CiAgICBtb2R1bGUuZXhwb3J0cyA9IGYoKTsKICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICJmdW5jdGlvbiIgJiYgZGVmaW5lLmFtZCkgewogICAgZGVmaW5lKFtdLCBmKTsKICB9IGVsc2UgewogICAgdmFyIGc7aWYgKHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgIGcgPSB3aW5kb3c7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgIGcgPSBnbG9iYWw7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIikgewogICAgICBnID0gc2VsZjsKICAgIH0gZWxzZSB7CiAgICAgIGcgPSB0aGlzOwogICAgfWcuVmVydHhQcm90b1N0dWIgPSBmKCk7CiAgfQp9KShmdW5jdGlvbiAoKSB7CiAgdmFyIGRlZmluZSwgbW9kdWxlLCBleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LCBuLCByKSB7CiAgICBmdW5jdGlvbiBzKG8sIHUpIHsKICAgICAgaWYgKCFuW29dKSB7CiAgICAgICAgaWYgKCF0W29dKSB7CiAgICAgICAgICB2YXIgYSA9IHR5cGVvZiByZXF1aXJlID09ICJmdW5jdGlvbiIgJiYgcmVxdWlyZTtpZiAoIXUgJiYgYSkgcmV0dXJuIGEobywgITApO2lmIChpKSByZXR1cm4gaShvLCAhMCk7dmFyIGYgPSBuZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIiArIG8gKyAiJyIpO3Rocm93IChmLmNvZGUgPSAiTU9EVUxFX05PVF9GT1VORCIsIGYpOwogICAgICAgIH12YXIgbCA9IG5bb10gPSB7IGV4cG9ydHM6IHt9IH07dFtvXVswXS5jYWxsKGwuZXhwb3J0cywgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHZhciBuID0gdFtvXVsxXVtlXTtyZXR1cm4gcyhuID8gbiA6IGUpOwogICAgICAgIH0sIGwsIGwuZXhwb3J0cywgZSwgdCwgbiwgcik7CiAgICAgIH1yZXR1cm4gbltvXS5leHBvcnRzOwogICAgfXZhciBpID0gdHlwZW9mIHJlcXVpcmUgPT0gImZ1bmN0aW9uIiAmJiByZXF1aXJlO2ZvciAodmFyIG8gPSAwOyBvIDwgci5sZW5ndGg7IG8rKykgcyhyW29dKTtyZXR1cm4gczsKICB9KSh7IDE6IFtmdW5jdGlvbiAocmVxdWlyZSwgbW9kdWxlLCBleHBvcnRzKSB7CiAgICAgICd1c2Ugc3RyaWN0JzsKCiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsKICAgICAgICB2YWx1ZTogdHJ1ZQogICAgICB9KTsKCiAgICAgIHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7aWYgKCd2YWx1ZScgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOwogICAgICAgICAgfQogICAgICAgIH1yZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgewogICAgICAgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7CiAgICAgICAgfTsKICAgICAgfSkoKTsKCiAgICAgIGV4cG9ydHNbJ2RlZmF1bHQnXSA9IGFjdGl2YXRlOwoKICAgICAgZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogICAgICAgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciBWZXJ0eFByb3RvU3R1YiA9IChmdW5jdGlvbiAoKSB7CiAgICAgICAgLyogcHJpdmF0ZQ0KICAgICAgICAgIF9jb250aW51b3VzT3BlbjogYm9vbGVhbg0KICAgICAgICAgICAgX3J1bnRpbWVQcm90b1N0dWJVUkw6IHN0cmluZw0KICAgICAgICAgIF9idXM6IE1pbmlCdXMNCiAgICAgICAgICBfbXNnQ2FsbGJhY2s6IChNZXNzYWdlKSA9PiB2b2lkDQogICAgICAgICAgX2NvbmZpZzogeyB1cmwsIHJ1bnRpbWVVUkwgfQ0KICAgICAgICAgICAgX3NvY2s6IChXZWJTb2NrZXQgfCBTb2NrSlMpDQogICAgICAgICAgX3JlT3BlbjogYm9vbGVhbg0KICAgICAgICAqLwoKICAgICAgICAvKioNCiAgICAgICAgICogVmVydHggUHJvdG9TdHViIGNyZWF0aW9uDQogICAgICAgICAqIEBwYXJhbSAge3N0cmluZ30gcnVudGltZVByb3RvU3R1YlVSTCAtIFVSTCB1c2VkIGludGVybmFsbHkgZm9yIG1lc3NhZ2UgZGVsaXZlcnkgcG9pbnQuIE5vdCB1c2VkIGZvciBNZXNzYWdlTm9kZSBkZWxpdmVyLg0KICAgICAgICAgKiBAcGFyYW0gIHtNaW5pQnVzfSBidXMgLSBNaW5pQnVzIHVzZWQgdG8gc2VuZC9yZWNlaXZlIG1lc3NhZ2VzLiBOb3JtYWxseSBjb25uZWN0ZWQgdG8gdGhlIE1lc3NhZ2VCdXMuDQogICAgICAgICAqIEBwYXJhbSAge09iamVjdH0gY29uZmlnIC0gTWFuZGF0b3J5IGZpZWxkcyBhcmU6ICJ1cmwiIG9mIHRoZSBNZXNzYWdlTm9kZSBhZGRyZXNzIGFuZCAicnVudGltZVVSTCIuDQogICAgICAgICAqIEByZXR1cm4ge1ZlcnR4UHJvdG9TdHVifQ0KICAgICAgICAgKi8KCiAgICAgICAgZnVuY3Rpb24gVmVydHhQcm90b1N0dWIocnVudGltZVByb3RvU3R1YlVSTCwgYnVzLCBjb25maWcpIHsKICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBWZXJ0eFByb3RvU3R1Yik7CgogICAgICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICAgICB0aGlzLl9pZCA9IDA7CiAgICAgICAgICB0aGlzLl9jb250aW51b3VzT3BlbiA9IHRydWU7CgogICAgICAgICAgdGhpcy5fcnVudGltZVByb3RvU3R1YlVSTCA9IHJ1bnRpbWVQcm90b1N0dWJVUkw7CiAgICAgICAgICB0aGlzLl9idXMgPSBidXM7CiAgICAgICAgICB0aGlzLl9jb25maWcgPSBjb25maWc7CgogICAgICAgICAgdGhpcy5fcnVudGltZVNlc3Npb25VUkwgPSBjb25maWcucnVudGltZVVSTDsKICAgICAgICAgIHRoaXMuX3JlT3BlbiA9IGZhbHNlOwoKICAgICAgICAgIGJ1cy5hZGRMaXN0ZW5lcignKicsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgICAgX3RoaXMuX29wZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIGlmIChtc2cuYm9keSAmJiBtc2cuYm9keS52aWEgPT09IF90aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMKSByZXR1cm47CgogICAgICAgICAgICAgIF90aGlzLl9zb2NrLnNlbmQoSlNPTi5zdHJpbmdpZnkobXNnKSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICAvKioNCiAgICAgICAgICogR2V0IHRoZSBjb25maWd1cmF0aW9uIGZvciB0aGlzIFByb3RvU3R1Yg0KICAgICAgICAgKiBAcmV0dXJuIHtPYmplY3R9IC0gTWFuZGF0b3J5IGZpZWxkcyBhcmU6ICJ1cmwiIG9mIHRoZSBNZXNzYWdlTm9kZSBhZGRyZXNzIGFuZCAicnVudGltZVVSTCIuDQogICAgICAgICAqLwoKICAgICAgICBfY3JlYXRlQ2xhc3MoVmVydHhQcm90b1N0dWIsIFt7CiAgICAgICAgICBrZXk6ICdjb25uZWN0JywKCiAgICAgICAgICAvKioNCiAgICAgICAgICAgKiBUcnkgdG8gb3BlbiB0aGUgY29ubmVjdGlvbiB0byB0aGUgTWVzc2FnZU5vZGUuIENvbm5lY3Rpb24gaXMgYXV0byBtYW5hZ2VkLCB0aGVyZSBpcyBubyBuZWVkIHRvIGNhbGwgdGhpcyBleHBsaWNpdGx5Lg0KICAgICAgICAgICAqIEhvd2V2ZXIsIGlmICJkaXNjb25uZWN0KCkiIGlzIGNhbGxlZCwgaXQncyBuZWNlc3NhcnkgdG8gY2FsbCB0aGlzIHRvIGVuYWJsZSBjb25uZWN0aW9ucyBhZ2Fpbi4NCiAgICAgICAgICAgKiBBIHN0YXR1cyBtZXNzYWdlIGlzIHNlbnQgdG8gInJ1bnRpbWVQcm90b1N0dWJVUkwvc3RhdHVzIiwgY29udGFpbmluZyB0aGUgdmFsdWUgImNvbm5lY3RlZCIgaWYgc3VjY2Vzc2Z1bCwgb3IgImRpc2Nvbm5lY3RlZCIgaWYgc29tZSBlcnJvciBvY2N1cnMuDQogICAgICAgICAgICovCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29ubmVjdCgpIHsKICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICAgICAgIF90aGlzLl9jb250aW51b3VzT3BlbiA9IHRydWU7CiAgICAgICAgICAgIF90aGlzLl9vcGVuKGZ1bmN0aW9uICgpIHt9KTsKICAgICAgICAgIH0KCiAgICAgICAgICAvKioNCiAgICAgICAgICAgKiBJdCB3aWxsIGRpc2Nvbm5lY3QgYW5kIG9yZGVyIHRvIHN0YXkgZGlzY29ubmVjdGVkLiBSZWNvbm5lY3Rpb24gdHJpZXMsIHdpbGwgbm90IGJlIGF0dGVtcHRlZCwgdW5sZXNzICJjb25uZWN0KCkiIGlzIGNhbGxlZC4NCiAgICAgICAgICAgKiBBIHN0YXR1cyBtZXNzYWdlIGlzIHNlbnQgdG8gInJ1bnRpbWVQcm90b1N0dWJVUkwvc3RhdHVzIiB3aXRoIHZhbHVlICJkaXNjb25uZWN0ZWQiLg0KICAgICAgICAgICAqLwogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogJ2Rpc2Nvbm5lY3QnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRpc2Nvbm5lY3QoKSB7CiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAgICAgICBfdGhpcy5fY29udGludW91c09wZW4gPSBmYWxzZTsKICAgICAgICAgICAgaWYgKF90aGlzLl9zb2NrKSB7CiAgICAgICAgICAgICAgX3RoaXMuX3NlbmRDbG9zZSgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnX3NlbmRPcGVuJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2VuZE9wZW4oY2FsbGJhY2spIHsKICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICAgICAgIF90aGlzLl9pZCsrOwogICAgICAgICAgICB2YXIgbXNnID0gewogICAgICAgICAgICAgIGlkOiBfdGhpcy5faWQsIHR5cGU6ICdvcGVuJywgZnJvbTogX3RoaXMuX3J1bnRpbWVTZXNzaW9uVVJMLCB0bzogJ21uOi9zZXNzaW9uJwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgaWYgKF90aGlzLl9yZU9wZW4pIHsKICAgICAgICAgICAgICBtc2cudHlwZSA9ICdyZS1vcGVuJzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy9yZWdpc3RlciBhbmQgd2FpdCBmb3Igb3BlbiByZXBseS4uLgogICAgICAgICAgICB2YXIgaGFzUmVzcG9uc2UgPSBmYWxzZTsKICAgICAgICAgICAgX3RoaXMuX3Nlc3Npb25DYWxsYmFjayA9IGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgICAgICAgIGlmIChyZXBseS50eXBlID09PSAncmVzcG9uc2UnICYgcmVwbHkuaWQgPT09IG1zZy5pZCkgewogICAgICAgICAgICAgICAgaGFzUmVzcG9uc2UgPSB0cnVlOwogICAgICAgICAgICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgIGlmIChyZXBseS5ib2R5LnJ1bnRpbWVUb2tlbikgewogICAgICAgICAgICAgICAgICAgIC8vc2V0dXAgcnVudGltZVNlc3Npb24KICAgICAgICAgICAgICAgICAgICBfdGhpcy5fcmVPcGVuID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5fcnVudGltZVNlc3Npb25VUkwgPSBfdGhpcy5fY29uZmlnLnJ1bnRpbWVVUkwgKyAnLycgKyByZXBseS5ib2R5LnJ1bnRpbWVUb2tlbjsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgX3RoaXMuX3NlbmRTdGF0dXMoJ2Nvbm5lY3RlZCcpOwogICAgICAgICAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuX3NlbmRTdGF0dXMoJ2Rpc2Nvbm5lY3RlZCcsIHJlcGx5LmJvZHkuZGVzYyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgX3RoaXMuX3NvY2suc2VuZChKU09OLnN0cmluZ2lmeShtc2cpKTsKICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgaWYgKCFoYXNSZXNwb25zZSkgewogICAgICAgICAgICAgICAgLy9ubyByZXNwb25zZSBhZnRlciB4IHNlY29uZHMuLi4KICAgICAgICAgICAgICAgIF90aGlzLl9zZW5kU3RhdHVzKCdkaXNjb25uZWN0ZWQnLCAnVGltZW91dCBmcm9tIG1uOi9zZXNzaW9uJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCAzMDAwKTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdfc2VuZENsb3NlJywKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2VuZENsb3NlKCkgewogICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgICAgICAgX3RoaXMuX2lkKys7CiAgICAgICAgICAgIHZhciBtc2cgPSB7CiAgICAgICAgICAgICAgaWQ6IF90aGlzLl9pZCwgdHlwZTogJ2Nsb3NlJywgZnJvbTogX3RoaXMuX3J1bnRpbWVTZXNzaW9uVVJMLCB0bzogJ21uOi9zZXNzaW9uJwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy9pbnZhbGlkYXRlIHJ1bnRpbWVTZXNzaW9uCiAgICAgICAgICAgIF90aGlzLl9yZU9wZW4gPSBmYWxzZTsKICAgICAgICAgICAgX3RoaXMuX3J1bnRpbWVTZXNzaW9uVVJMID0gX3RoaXMuX2NvbmZpZy5fcnVudGltZVVSTDsKCiAgICAgICAgICAgIF90aGlzLl9zb2NrLnNlbmQoSlNPTi5zdHJpbmdpZnkobXNnKSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnX3NlbmRTdGF0dXMnLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZW5kU3RhdHVzKHZhbHVlLCByZWFzb24pIHsKICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICAgICAgIHZhciBtc2cgPSB7CiAgICAgICAgICAgICAgdHlwZTogJ3VwZGF0ZScsCiAgICAgICAgICAgICAgZnJvbTogX3RoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwsCiAgICAgICAgICAgICAgdG86IF90aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMICsgJy9zdGF0dXMnLAogICAgICAgICAgICAgIGJvZHk6IHsKICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGlmIChyZWFzb24pIHsKICAgICAgICAgICAgICBtc2cuYm9keS5kZXNjID0gcmVhc29uOwogICAgICAgICAgICB9CgogICAgICAgICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKG1zZyk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAnX3dhaXRSZWFkeScsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3dhaXRSZWFkeShjYWxsYmFjaykgewogICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgICAgICAgaWYgKF90aGlzLl9zb2NrLnJlYWR5U3RhdGUgPT09IDEpIHsKICAgICAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgX3RoaXMuX3dhaXRSZWFkeShjYWxsYmFjayk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdfZGVsaXZlcicsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2RlbGl2ZXIobXNnKSB7CiAgICAgICAgICAgIGlmICghbXNnLmJvZHkpIG1zZy5ib2R5ID0ge307CgogICAgICAgICAgICBtc2cuYm9keS52aWEgPSB0aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMOwogICAgICAgICAgICB0aGlzLl9idXMucG9zdE1lc3NhZ2UobXNnKTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdfb3BlbicsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29wZW4oY2FsbGJhY2spIHsKICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICAgICAgIGlmICghdGhpcy5fY29udGludW91c09wZW4pIHsKICAgICAgICAgICAgICAvL1RPRE86IHNlbmQgc3RhdHVzIChzZW50IG1lc3NhZ2UgZXJyb3IgLSBkaXNjb25uZWN0ZWQpCiAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoIV90aGlzLl9zb2NrKSB7CiAgICAgICAgICAgICAgaWYgKF90aGlzLl9jb25maWcudXJsLnN1YnN0cmluZygwLCAyKSA9PT0gJ3dzJykgewogICAgICAgICAgICAgICAgX3RoaXMuX3NvY2sgPSBuZXcgV2ViU29ja2V0KF90aGlzLl9jb25maWcudXJsKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgX3RoaXMuX3NvY2sgPSBuZXcgU29ja0pTKF90aGlzLl9jb25maWcudXJsKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIF90aGlzLl9zb2NrLm9ub3BlbiA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIF90aGlzLl9zZW5kT3BlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICBfdGhpcy5fc29jay5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgdmFyIG1zZyA9IEpTT04ucGFyc2UoZS5kYXRhKTsKICAgICAgICAgICAgICAgIGlmIChtc2cuZnJvbSA9PT0gJ21uOi9zZXNzaW9uJykgewogICAgICAgICAgICAgICAgICBpZiAoX3RoaXMuX3Nlc3Npb25DYWxsYmFjaykgewogICAgICAgICAgICAgICAgICAgIF90aGlzLl9zZXNzaW9uQ2FsbGJhY2sobXNnKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgX3RoaXMuX2RlbGl2ZXIobXNnKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICBfdGhpcy5fc29jay5vbmNsb3NlID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgICAgICAgICB2YXIgcmVhc29uID0gdW5kZWZpbmVkOwoKICAgICAgICAgICAgICAgIC8vU2VlIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2NDU1I3NlY3Rpb24tNy40CiAgICAgICAgICAgICAgICBpZiAoZXZlbnQuY29kZSA9PT0gMTAwMCkgewogICAgICAgICAgICAgICAgICByZWFzb24gPSAnTm9ybWFsIGNsb3N1cmUsIG1lYW5pbmcgdGhhdCB0aGUgcHVycG9zZSBmb3Igd2hpY2ggdGhlIGNvbm5lY3Rpb24gd2FzIGVzdGFibGlzaGVkIGhhcyBiZWVuIGZ1bGZpbGxlZC4nOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDAxKSB7CiAgICAgICAgICAgICAgICAgIHJlYXNvbiA9ICdBbiBlbmRwb2ludCBpcyBcJ2dvaW5nIGF3YXlcJywgc3VjaCBhcyBhIHNlcnZlciBnb2luZyBkb3duIG9yIGEgYnJvd3NlciBoYXZpbmcgbmF2aWdhdGVkIGF3YXkgZnJvbSBhIHBhZ2UuJzsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAwMikgewogICAgICAgICAgICAgICAgICByZWFzb24gPSAnQW4gZW5kcG9pbnQgaXMgdGVybWluYXRpbmcgdGhlIGNvbm5lY3Rpb24gZHVlIHRvIGEgcHJvdG9jb2wgZXJyb3InOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDAzKSB7CiAgICAgICAgICAgICAgICAgIHJlYXNvbiA9ICdBbiBlbmRwb2ludCBpcyB0ZXJtaW5hdGluZyB0aGUgY29ubmVjdGlvbiBiZWNhdXNlIGl0IGhhcyByZWNlaXZlZCBhIHR5cGUgb2YgZGF0YSBpdCBjYW5ub3QgYWNjZXB0IChlLmcuLCBhbiBlbmRwb2ludCB0aGF0IHVuZGVyc3RhbmRzIG9ubHkgdGV4dCBkYXRhIE1BWSBzZW5kIHRoaXMgaWYgaXQgcmVjZWl2ZXMgYSBiaW5hcnkgbWVzc2FnZSkuJzsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAwNCkgewogICAgICAgICAgICAgICAgICByZWFzb24gPSAnUmVzZXJ2ZWQuIFRoZSBzcGVjaWZpYyBtZWFuaW5nIG1pZ2h0IGJlIGRlZmluZWQgaW4gdGhlIGZ1dHVyZS4nOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDA1KSB7CiAgICAgICAgICAgICAgICAgIHJlYXNvbiA9ICdObyBzdGF0dXMgY29kZSB3YXMgYWN0dWFsbHkgcHJlc2VudC4nOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDA2KSB7CiAgICAgICAgICAgICAgICAgIHJlYXNvbiA9ICdUaGUgY29ubmVjdGlvbiB3YXMgY2xvc2VkIGFibm9ybWFsbHksIGUuZy4sIHdpdGhvdXQgc2VuZGluZyBvciByZWNlaXZpbmcgYSBDbG9zZSBjb250cm9sIGZyYW1lJzsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAwNykgewogICAgICAgICAgICAgICAgICByZWFzb24gPSAnQW4gZW5kcG9pbnQgaXMgdGVybWluYXRpbmcgdGhlIGNvbm5lY3Rpb24gYmVjYXVzZSBpdCBoYXMgcmVjZWl2ZWQgZGF0YSB3aXRoaW4gYSBtZXNzYWdlIHRoYXQgd2FzIG5vdCBjb25zaXN0ZW50IHdpdGggdGhlIHR5cGUgb2YgdGhlIG1lc3NhZ2UgKGUuZy4sIG5vbi1VVEYtOCBbaHR0cDovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzYyOV0gZGF0YSB3aXRoaW4gYSB0ZXh0IG1lc3NhZ2UpLic7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDgpIHsKICAgICAgICAgICAgICAgICAgcmVhc29uID0gJ0FuIGVuZHBvaW50IGlzIHRlcm1pbmF0aW5nIHRoZSBjb25uZWN0aW9uIGJlY2F1c2UgaXQgaGFzIHJlY2VpdmVkIGEgbWVzc2FnZSB0aGF0ICJ2aW9sYXRlcyBpdHMgcG9saWN5Ii4gVGhpcyByZWFzb24gaXMgZ2l2ZW4gZWl0aGVyIGlmIHRoZXJlIGlzIG5vIG90aGVyIHN1dGlibGUgcmVhc29uLCBvciBpZiB0aGVyZSBpcyBhIG5lZWQgdG8gaGlkZSBzcGVjaWZpYyBkZXRhaWxzIGFib3V0IHRoZSBwb2xpY3kuJzsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAwOSkgewogICAgICAgICAgICAgICAgICByZWFzb24gPSAnQW4gZW5kcG9pbnQgaXMgdGVybWluYXRpbmcgdGhlIGNvbm5lY3Rpb24gYmVjYXVzZSBpdCBoYXMgcmVjZWl2ZWQgYSBtZXNzYWdlIHRoYXQgaXMgdG9vIGJpZyBmb3IgaXQgdG8gcHJvY2Vzcy4nOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDEwKSB7CiAgICAgICAgICAgICAgICAgIHJlYXNvbiA9ICdBbiBlbmRwb2ludCAoY2xpZW50KSBpcyB0ZXJtaW5hdGluZyB0aGUgY29ubmVjdGlvbiBiZWNhdXNlIGl0IGhhcyBleHBlY3RlZCB0aGUgc2VydmVyIHRvIG5lZ290aWF0ZSBvbmUgb3IgbW9yZSBleHRlbnNpb24sIGJ1dCB0aGUgc2VydmVyIGRpZG5cJ3QgcmV0dXJuIHRoZW0gaW4gdGhlIHJlc3BvbnNlIG1lc3NhZ2Ugb2YgdGhlIFdlYlNvY2tldCBoYW5kc2hha2UuIDxiciAvPiBTcGVjaWZpY2FsbHksIHRoZSBleHRlbnNpb25zIHRoYXQgYXJlIG5lZWRlZCBhcmU6ICcgKyBldmVudC5yZWFzb247CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMTEpIHsKICAgICAgICAgICAgICAgICAgcmVhc29uID0gJ0Egc2VydmVyIGlzIHRlcm1pbmF0aW5nIHRoZSBjb25uZWN0aW9uIGJlY2F1c2UgaXQgZW5jb3VudGVyZWQgYW4gdW5leHBlY3RlZCBjb25kaXRpb24gdGhhdCBwcmV2ZW50ZWQgaXQgZnJvbSBmdWxmaWxsaW5nIHRoZSByZXF1ZXN0Lic7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMTUpIHsKICAgICAgICAgICAgICAgICAgcmVhc29uID0gJ1RoZSBjb25uZWN0aW9uIHdhcyBjbG9zZWQgZHVlIHRvIGEgZmFpbHVyZSB0byBwZXJmb3JtIGEgVExTIGhhbmRzaGFrZSAoZS5nLiwgdGhlIHNlcnZlciBjZXJ0aWZpY2F0ZSBjYW5cJ3QgYmUgdmVyaWZpZWQpLic7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICByZWFzb24gPSAnVW5rbm93biByZWFzb24nOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGRlbGV0ZSBfdGhpcy5fc29jazsKICAgICAgICAgICAgICAgIF90aGlzLl9zZW5kU3RhdHVzKCdkaXNjb25uZWN0ZWQnLCByZWFzb24pOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgX3RoaXMuX3dhaXRSZWFkeShjYWxsYmFjayk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICdjb25maWcnLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb25maWc7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAncnVudGltZVNlc3Npb24nLAogICAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9ydW50aW1lU2Vzc2lvblVSTDsKICAgICAgICAgIH0KICAgICAgICB9XSk7CgogICAgICAgIHJldHVybiBWZXJ0eFByb3RvU3R1YjsKICAgICAgfSkoKTsKCiAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKHVybCwgYnVzLCBjb25maWcpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgbmFtZTogJ1ZlcnR4UHJvdG9TdHViJywKICAgICAgICAgIGluc3RhbmNlOiBuZXcgVmVydHhQcm90b1N0dWIodXJsLCBidXMsIGNvbmZpZykKICAgICAgICB9OwogICAgICB9CgogICAgICAvKioNCiAgICAgICogQ2FsbGJhY2sgdXNlZCB0byBzZW5kIG1lc3NhZ2VzDQogICAgICAqIEBjYWxsYmFjayBQb3N0TWVzc2FnZQ0KICAgICAgKiBAcGFyYW0ge01lc3NhZ2V9IG1zZyAtIE1lc3NhZ2UgdG8gc2VuZA0KICAgICAgKi8KICAgICAgbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107CiAgICB9LCB7fV0gfSwge30sIFsxXSkoMSk7Cn0pOwoKfSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiID8gd2luZG93IDoge30pCn0se31dfSx7fSxbMV0pKDEpCn0pOw==",
      "sourceCodeClassname": "VertxProtoStub",
      "encoding": "base64",
      "signature": ""
    },
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "constraints": "",
    "hypertyCapabilities": "",
    "protocolCapabilities": "",
    "policies": "",
    "dataObjects": [],
    "configuration": {
      "url": "wss://msg-node.rethink.quobis.com/ws"
    },
    "accessControlPolicy": "somePolicy"
  },
  "MatrixProtoStub": {
    "cguid": "1",
    "type": "0",
    "version": "0.1",
    "description": "Description of MatrixProtoStub",
    "objectName": "MatrixProtoStub",
    "sourcePackageURL": "/sourcePackage",
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKKGZ1bmN0aW9uIChnbG9iYWwpewoidXNlIHN0cmljdCI7CgooZnVuY3Rpb24gKGYpIHsKICBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICJvYmplY3QiICYmIHR5cGVvZiBtb2R1bGUgIT09ICJ1bmRlZmluZWQiKSB7CiAgICBtb2R1bGUuZXhwb3J0cyA9IGYoKTsKICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICJmdW5jdGlvbiIgJiYgZGVmaW5lLmFtZCkgewogICAgZGVmaW5lKFtdLCBmKTsKICB9IGVsc2UgewogICAgdmFyIGc7aWYgKHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgIGcgPSB3aW5kb3c7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgIGcgPSBnbG9iYWw7CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIikgewogICAgICBnID0gc2VsZjsKICAgIH0gZWxzZSB7CiAgICAgIGcgPSB0aGlzOwogICAgfWcuTWF0cml4UHJvdG9TdHViID0gZigpOwogIH0KfSkoZnVuY3Rpb24gKCkgewogIHZhciBkZWZpbmUsIG1vZHVsZSwgZXhwb3J0cztyZXR1cm4gKGZ1bmN0aW9uIGUodCwgbiwgcikgewogICAgZnVuY3Rpb24gcyhvLCB1KSB7CiAgICAgIGlmICghbltvXSkgewogICAgICAgIGlmICghdFtvXSkgewogICAgICAgICAgdmFyIGEgPSB0eXBlb2YgcmVxdWlyZSA9PSAiZnVuY3Rpb24iICYmIHJlcXVpcmU7aWYgKCF1ICYmIGEpIHJldHVybiBhKG8sICEwKTtpZiAoaSkgcmV0dXJuIGkobywgITApO3ZhciBmID0gbmV3IEVycm9yKCJDYW5ub3QgZmluZCBtb2R1bGUgJyIgKyBvICsgIiciKTt0aHJvdyAoZi5jb2RlID0gIk1PRFVMRV9OT1RfRk9VTkQiLCBmKTsKICAgICAgICB9dmFyIGwgPSBuW29dID0geyBleHBvcnRzOiB7fSB9O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB2YXIgbiA9IHRbb11bMV1bZV07cmV0dXJuIHMobiA/IG4gOiBlKTsKICAgICAgICB9LCBsLCBsLmV4cG9ydHMsIGUsIHQsIG4sIHIpOwogICAgICB9cmV0dXJuIG5bb10uZXhwb3J0czsKICAgIH12YXIgaSA9IHR5cGVvZiByZXF1aXJlID09ICJmdW5jdGlvbiIgJiYgcmVxdWlyZTtmb3IgKHZhciBvID0gMDsgbyA8IHIubGVuZ3RoOyBvKyspIHMocltvXSk7cmV0dXJuIHM7CiAgfSkoeyAxOiBbZnVuY3Rpb24gKHJlcXVpcmUsIG1vZHVsZSwgZXhwb3J0cykgewoKICAgICAgLyoqCiAgICAgICAqIFByb3RvU3R1YiBJbnRlcmZhY2UKICAgICAgICovCiAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgICAgICB2YWx1ZTogdHJ1ZQogICAgICB9KTsKCiAgICAgIHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24gKCkgewogICAgICAgIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgewogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO2Rlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTtkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7aWYgKCJ2YWx1ZSIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOwogICAgICAgICAgfQogICAgICAgIH1yZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgewogICAgICAgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtyZXR1cm4gQ29uc3RydWN0b3I7CiAgICAgICAgfTsKICAgICAgfSkoKTsKCiAgICAgIGV4cG9ydHNbImRlZmF1bHQiXSA9IGFjdGl2YXRlOwoKICAgICAgZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgewogICAgICAgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24iKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciBNYXRyaXhQcm90b1N0dWIgPSAoZnVuY3Rpb24gKCkgewoKICAgICAgICAvKioKICAgICAgICAgKiBJbml0aWFsaXNlIHRoZSBwcm90b2NvbCBzdHViIGluY2x1ZGluZyBhcyBpbnB1dCBwYXJhbWV0ZXJzIGl0cyBhbGxvY2F0ZWQKICAgICAgICAgKiBjb21wb25lbnQgcnVudGltZSB1cmwsIHRoZSBydW50aW1lIEJVUyBwb3N0TWVzc2FnZSBmdW5jdGlvbiB0byBiZSBpbnZva2VkCiAgICAgICAgICogb24gbWVzc2FnZXMgcmVjZWl2ZWQgYnkgdGhlIHByb3RvY29sIHN0dWIgYW5kIHJlcXVpcmVkIGNvbmZpZ3VyYXRpb24gcmV0cmlldmVkIGZyb20gcHJvdG9jb2xTdHViIGRlc2NyaXB0b3IuCiAgICAgICAgICogQHBhcmFtICB7VVJMLnJ1bnRpbWVQcm90b1N0dWJVUkx9ICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bnRpbWVQcm90b1N0dWJVUkwgcnVudGltZVByb3RvU3ViVVJMCiAgICAgICAgICogQHBhcmFtICB7TWVzc2FnZS5NZXNzYWdlfSAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1c1Bvc3RNZXNzYWdlICAgICBjb25maWd1cmF0aW9uCiAgICAgICAgICogQHBhcmFtICB7UHJvdG9TdHViRGVzY3JpcHRvci5Db25maWd1cmF0aW9uRGF0YUxpc3R9IGNvbmZpZ3VyYXRpb24gICAgICBjb25maWd1cmF0aW9uCiAgICAgICAgICovCgogICAgICAgIGZ1bmN0aW9uIE1hdHJpeFByb3RvU3R1YihydW50aW1lUHJvdG9TdHViVVJMLCBtaW5pQnVzLCBjb25maWd1cmF0aW9uKSB7CiAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNYXRyaXhQcm90b1N0dWIpOwoKICAgICAgICAgIHRoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwgPSBydW50aW1lUHJvdG9TdHViVVJMOwogICAgICAgICAgdGhpcy5fcnVudGltZVVSTCA9IGNvbmZpZ3VyYXRpb24ucnVudGltZVVSTDsKICAgICAgICAgIHRoaXMuX2NvbmZpZ3VyYXRpb24gPSBjb25maWd1cmF0aW9uOwogICAgICAgICAgdGhpcy5fYnVzID0gbWluaUJ1czsKICAgICAgICAgIHRoaXMuX2lkZW50aXR5ID0gbnVsbDsKICAgICAgICAgIHRoaXMuX3dzID0gbnVsbDsKICAgICAgICAgIHRoaXMuX2J1cy5hZGRMaXN0ZW5lcignKicsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgICAgICAgX3RoaXMuX2Fzc3VtZU9wZW4gPSB0cnVlOwogICAgICAgICAgICBfdGhpcy5fc2VuZFdTTXNnKG1zZyk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuX2Fzc3VtZU9wZW4gPSBmYWxzZTsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIENvbm5lY3QgdGhlIHByb3RvY29sIHN0dWIgdG8gdGhlIGJhY2stZW5kIHNlcnZlci4KICAgICAgICAgKiBAcGFyYW0gIHtJRFRva2VufSBpZGVudGl0eSBpZGVudGl0eSAuLiB0aGlzIGNhbiBiZSBlaXRoZXIgYW4gaWR0b2tlbiwKICAgICAgICAgKiAgICAgICAgIG9yIGEgdXNlcm5hbWUvcGFzc3dvcmQgY29tYmluYXRpb24gdG8gYXV0aGVudGljYXRlIGFnYWluc3QgdGhlIE1hdHJpeCBIUwogICAgICAgICAqLwoKICAgICAgICBfY3JlYXRlQ2xhc3MoTWF0cml4UHJvdG9TdHViLCBbewogICAgICAgICAga2V5OiAiY29ubmVjdCIsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY29ubmVjdChpZGVudGl0eSkgewogICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgICAgICAgIHRoaXMuX2lkZW50aXR5ID0gaWRlbnRpdHk7CiAgICAgICAgICAgIHRoaXMuX2Fzc3VtZU9wZW4gPSB0cnVlOwoKICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgICAgICAgaWYgKF90aGlzMi5fd3MgJiYgX3RoaXMyLl93cy5yZWFkeVN0YXRlID09PSAxKSB7CiAgICAgICAgICAgICAgICByZXNvbHZlKF90aGlzMi5fd3MpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgLy8gY3JlYXRlIHNvY2tldCB0byB0aGUgTU4KICAgICAgICAgICAgICBfdGhpczIuX3dzID0gbmV3IFdlYlNvY2tldChfdGhpczIuX2NvbmZpZ3VyYXRpb24ubWVzc2FnaW5nbm9kZSk7CiAgICAgICAgICAgICAgX3RoaXMyLl93cy5vbm9wZW4gPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBfdGhpczIuX29uV1NPcGVuKCk7CiAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgLy8gbWVzc2FnZSBoYW5kbGVyIGZvciBpbml0aWFsIGhhbmRzaGFrZSBvbmx5CiAgICAgICAgICAgICAgX3RoaXMyLl93cy5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAobXNnKSB7CgogICAgICAgICAgICAgICAgdmFyIG0gPSBKU09OLnBhcnNlKG1zZy5kYXRhKTsKICAgICAgICAgICAgICAgIGlmIChtLnJlc3BvbnNlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgLy8gaW5zdGFsbCBkZWZhdWx0IG1zZyBoYW5kbGVyLCBzZW5kIHN0YXR1cyBhbmQgcmVzb2x2ZQogICAgICAgICAgICAgICAgICBfdGhpczIuX3dzLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChtKSB7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMyLl9vbldTTWVzc2FnZShtKTsKICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgX3RoaXMyLl9zZW5kU3RhdHVzKCJjb25uZWN0ZWQiKTsKICAgICAgICAgICAgICAgICAgcmVzb2x2ZShfdGhpczIuX3dzKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIHJlamVjdCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgIF90aGlzMi5fd3Mub25jbG9zZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIF90aGlzMi5fb25XU0Nsb3NlKCk7CiAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICBfdGhpczIuX3dzLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICBfdGhpczIuX29uV1NFcnJvcigpOwogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIC8qKgogICAgICAgICAgICogVG8gZGlzY29ubmVjdCB0aGUgcHJvdG9jb2wgc3R1Yi4KICAgICAgICAgICAqLwogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogImRpc2Nvbm5lY3QiLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRpc2Nvbm5lY3QoKSB7CiAgICAgICAgICAgIHRoaXMuX3NlbmRXU01zZyh7CiAgICAgICAgICAgICAgY21kOiAiZGlzY29ubmVjdCIsCiAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgcnVudGltZVVSTDogdGhpcy5fcnVudGltZVVSTAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMuX3NlbmRTdGF0dXMoImRpc2Nvbm5lY3RlZCIpOwogICAgICAgICAgICB0aGlzLl9hc3N1bWVPcGVuID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAiX3NlbmRXU01zZyIsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3NlbmRXU01zZyhtc2cpIHsKICAgICAgICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICAgICAgICBpZiAodGhpcy5fYXNzdW1lT3BlbikgdGhpcy5jb25uZWN0KCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgX3RoaXMzLl93cy5zZW5kKEpTT04uc3RyaW5naWZ5KG1zZykpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9LCB7CiAgICAgICAgICBrZXk6ICJfc2VuZFN0YXR1cyIsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3NlbmRTdGF0dXModmFsdWUsIHJlYXNvbikgewogICAgICAgICAgICB2YXIgbXNnID0gewogICAgICAgICAgICAgIHR5cGU6ICd1cGRhdGUnLAogICAgICAgICAgICAgIGZyb206IHRoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwsCiAgICAgICAgICAgICAgdG86IHRoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwgKyAnL3N0YXR1cycsCiAgICAgICAgICAgICAgYm9keTogewogICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICBpZiAocmVhc29uKSB7CiAgICAgICAgICAgICAgbXNnLmJvZHkuZGVzYyA9IHJlYXNvbjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy5fYnVzLnBvc3RNZXNzYWdlKG1zZyk7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAiX29uV1NPcGVuIiwKICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25XU09wZW4oKSB7CiAgICAgICAgICAgIHRoaXMuX3NlbmRXU01zZyh7CiAgICAgICAgICAgICAgY21kOiAiY29ubmVjdCIsCiAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgcnVudGltZVVSTDogdGhpcy5fcnVudGltZVVSTAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gcGFyc2UgbXNnIGFuZCBmb3J3YXJkIGl0IGxvY2FsbHkgdG8gbWluaUJ1cwogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogIl9vbldTTWVzc2FnZSIsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uV1NNZXNzYWdlKG1zZykgewogICAgICAgICAgICB0aGlzLl9idXMucG9zdE1lc3NhZ2UoSlNPTi5wYXJzZShtc2cuZGF0YSkpOwogICAgICAgICAgfQogICAgICAgIH0sIHsKICAgICAgICAgIGtleTogIl9vbldTQ2xvc2UiLAogICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbldTQ2xvc2UoKSB7CiAgICAgICAgICAgIC8vY29uc29sZS5sb2coIndlYnNvY2tldCBjbG9zZWQiKTsKICAgICAgICAgICAgdGhpcy5fc2VuZFN0YXR1cygiZGlzY29ubmVjdGVkIik7CiAgICAgICAgICB9CiAgICAgICAgfSwgewogICAgICAgICAga2V5OiAiX29uV1NFcnJvciIsCiAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uV1NFcnJvcihlcnIpIHsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIndlYnNvY2tldCBlcnJvcjogIiArIGVycik7CiAgICAgICAgICB9CiAgICAgICAgfV0pOwoKICAgICAgICByZXR1cm4gTWF0cml4UHJvdG9TdHViOwogICAgICB9KSgpOwoKICAgICAgZnVuY3Rpb24gYWN0aXZhdGUodXJsLCBidXMsIGNvbmZpZykgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBuYW1lOiAnTWF0cml4UHJvdG9TdHViJywKICAgICAgICAgIGluc3RhbmNlOiBuZXcgTWF0cml4UHJvdG9TdHViKHVybCwgYnVzLCBjb25maWcpCiAgICAgICAgfTsKICAgICAgfQoKICAgICAgbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWyJkZWZhdWx0Il07CiAgICB9LCB7fV0gfSwge30sIFsxXSkoMSk7Cn0pOwoKfSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiID8gd2luZG93IDoge30pCn0se31dfSx7fSxbMV0pKDEpCn0pOw==",
      "sourceCodeClassname": "MatrixProtoStub",
      "encoding": "base64",
      "signature": ""
    },
    "language": "Javascript ECMA5",
    "signature": "",
    "messageSchemas": "",
    "constraints": "",
    "hypertyCapabilities": "",
    "protocolCapabilities": "",
    "policies": "",
    "dataObjects": [],
    "configuration": {
      "homeserver": "matrix1.rethink",
      "messagingnode": "ws://localhost:8001/stub/connect"
    },
    "accessControlPolicy": "somePolicy"
  },
  "rethink.tlabscloud.com": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpIHsKICBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICJvYmplY3QiICYmIHR5cGVvZiBtb2R1bGUgIT09ICJ1bmRlZmluZWQiKSB7CiAgICBtb2R1bGUuZXhwb3J0cyA9IGYoKQogIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gImZ1bmN0aW9uIiAmJiBkZWZpbmUuYW1kKSB7CiAgICBkZWZpbmUoW10sIGYpCiAgfSBlbHNlIHsKICAgIHZhciBnOwogICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiKSB7CiAgICAgIGcgPSB3aW5kb3cKICAgIH0gZWxzZSBpZiAodHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgZyA9IGdsb2JhbAogICAgfSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgZyA9IHNlbGYKICAgIH0gZWxzZSB7CiAgICAgIGcgPSB0aGlzCiAgICB9CiAgICBnLmFjdGl2YXRlID0gZigpCiAgfQp9KShmdW5jdGlvbigpIHsKICB2YXIgZGVmaW5lLCBtb2R1bGUsIGV4cG9ydHM7CiAgcmV0dXJuIChmdW5jdGlvbiBlKHQsIG4sIHIpIHsKICAgIGZ1bmN0aW9uIHMobywgdSkgewogICAgICBpZiAoIW5bb10pIHsKICAgICAgICBpZiAoIXRbb10pIHsKICAgICAgICAgIHZhciBhID0gdHlwZW9mIHJlcXVpcmUgPT0gImZ1bmN0aW9uIiAmJiByZXF1aXJlOwogICAgICAgICAgaWYgKCF1ICYmIGEpIHJldHVybiBhKG8sICEwKTsKICAgICAgICAgIGlmIChpKSByZXR1cm4gaShvLCAhMCk7CiAgICAgICAgICB2YXIgZiA9IG5ldyBFcnJvcigiQ2Fubm90IGZpbmQgbW9kdWxlICciICsgbyArICInIik7CiAgICAgICAgICB0aHJvdyBmLmNvZGUgPSAiTU9EVUxFX05PVF9GT1VORCIsIGYKICAgICAgICB9CiAgICAgICAgdmFyIGwgPSBuW29dID0gewogICAgICAgICAgZXhwb3J0czoge30KICAgICAgICB9OwogICAgICAgIHRbb11bMF0uY2FsbChsLmV4cG9ydHMsIGZ1bmN0aW9uKGUpIHsKICAgICAgICAgIHZhciBuID0gdFtvXVsxXVtlXTsKICAgICAgICAgIHJldHVybiBzKG4gPyBuIDogZSkKICAgICAgICB9LCBsLCBsLmV4cG9ydHMsIGUsIHQsIG4sIHIpCiAgICAgIH0KICAgICAgcmV0dXJuIG5bb10uZXhwb3J0cwogICAgfQogICAgdmFyIGkgPSB0eXBlb2YgcmVxdWlyZSA9PSAiZnVuY3Rpb24iICYmIHJlcXVpcmU7CiAgICBmb3IgKHZhciBvID0gMDsgbyA8IHIubGVuZ3RoOyBvKyspIHMocltvXSk7CiAgICByZXR1cm4gcwogIH0pKHsKICAgIDE6IFtmdW5jdGlvbihyZXF1aXJlLCBtb2R1bGUsIGV4cG9ydHMpIHsKICAgICAgKGZ1bmN0aW9uKGdsb2JhbCkgewogICAgICAgICJ1c2Ugc3RyaWN0IjsKCiAgICAgICAgKGZ1bmN0aW9uKGYpIHsKICAgICAgICAgIGlmICh0eXBlb2YgZXhwb3J0cyA9PT0gIm9iamVjdCIgJiYgdHlwZW9mIG1vZHVsZSAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmKCk7CiAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICJmdW5jdGlvbiIgJiYgZGVmaW5lLmFtZCkgewogICAgICAgICAgICBkZWZpbmUoW10sIGYpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIGc7CiAgICAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICAgIGcgPSB3aW5kb3c7CiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGdsb2JhbCAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgICBnID0gZ2xvYmFsOwogICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICAgIGcgPSBzZWxmOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGcgPSB0aGlzOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGcuTWF0cml4UHJvdG9TdHViID0gZigpOwogICAgICAgICAgfQogICAgICAgIH0pKGZ1bmN0aW9uKCkgewogICAgICAgICAgdmFyIGRlZmluZSwgbW9kdWxlLCBleHBvcnRzOwogICAgICAgICAgcmV0dXJuIChmdW5jdGlvbiBlKHQsIG4sIHIpIHsKICAgICAgICAgICAgZnVuY3Rpb24gcyhvLCB1KSB7CiAgICAgICAgICAgICAgaWYgKCFuW29dKSB7CiAgICAgICAgICAgICAgICBpZiAoIXRbb10pIHsKICAgICAgICAgICAgICAgICAgdmFyIGEgPSB0eXBlb2YgcmVxdWlyZSA9PSAiZnVuY3Rpb24iICYmIHJlcXVpcmU7CiAgICAgICAgICAgICAgICAgIGlmICghdSAmJiBhKSByZXR1cm4gYShvLCAhMCk7CiAgICAgICAgICAgICAgICAgIGlmIChpKSByZXR1cm4gaShvLCAhMCk7CiAgICAgICAgICAgICAgICAgIHZhciBmID0gbmV3IEVycm9yKCJDYW5ub3QgZmluZCBtb2R1bGUgJyIgKyBvICsgIiciKTsKICAgICAgICAgICAgICAgICAgdGhyb3cgKGYuY29kZSA9ICJNT0RVTEVfTk9UX0ZPVU5EIiwgZik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB2YXIgbCA9IG5bb10gPSB7CiAgICAgICAgICAgICAgICAgIGV4cG9ydHM6IHt9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgdFtvXVswXS5jYWxsKGwuZXhwb3J0cywgZnVuY3Rpb24oZSkgewogICAgICAgICAgICAgICAgICB2YXIgbiA9IHRbb11bMV1bZV07CiAgICAgICAgICAgICAgICAgIHJldHVybiBzKG4gPyBuIDogZSk7CiAgICAgICAgICAgICAgICB9LCBsLCBsLmV4cG9ydHMsIGUsIHQsIG4sIHIpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gbltvXS5leHBvcnRzOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHZhciBpID0gdHlwZW9mIHJlcXVpcmUgPT0gImZ1bmN0aW9uIiAmJiByZXF1aXJlOwogICAgICAgICAgICBmb3IgKHZhciBvID0gMDsgbyA8IHIubGVuZ3RoOyBvKyspIHMocltvXSk7CiAgICAgICAgICAgIHJldHVybiBzOwogICAgICAgICAgfSkoewogICAgICAgICAgICAxOiBbZnVuY3Rpb24ocmVxdWlyZSwgbW9kdWxlLCBleHBvcnRzKSB7CgogICAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgICAqIFByb3RvU3R1YiBJbnRlcmZhY2UKICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAidXNlIHN0cmljdCI7CgogICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICAgICAgICAgICAgICAgIHZhbHVlOiB0cnVlCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIHZhciBfY3JlYXRlQ2xhc3MgPSAoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsKICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07CiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOwogICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBpZiAoInZhbHVlIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsKICAgICAgICAgICAgICAgICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsKICAgICAgICAgICAgICAgICAgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7CiAgICAgICAgICAgICAgICAgIHJldHVybiBDb25zdHJ1Y3RvcjsKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfSkoKTsKCiAgICAgICAgICAgICAgZXhwb3J0c1siZGVmYXVsdCJdID0gYWN0aXZhdGU7CgogICAgICAgICAgICAgIGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsKICAgICAgICAgICAgICAgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7CiAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvbiIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgdmFyIE1hdHJpeFByb3RvU3R1YiA9IChmdW5jdGlvbigpIHsKCiAgICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgICAqIEluaXRpYWxpc2UgdGhlIHByb3RvY29sIHN0dWIgaW5jbHVkaW5nIGFzIGlucHV0IHBhcmFtZXRlcnMgaXRzIGFsbG9jYXRlZAogICAgICAgICAgICAgICAgICogY29tcG9uZW50IHJ1bnRpbWUgdXJsLCB0aGUgcnVudGltZSBCVVMgcG9zdE1lc3NhZ2UgZnVuY3Rpb24gdG8gYmUgaW52b2tlZAogICAgICAgICAgICAgICAgICogb24gbWVzc2FnZXMgcmVjZWl2ZWQgYnkgdGhlIHByb3RvY29sIHN0dWIgYW5kIHJlcXVpcmVkIGNvbmZpZ3VyYXRpb24gcmV0cmlldmVkIGZyb20gcHJvdG9jb2xTdHViIGRlc2NyaXB0b3IuCiAgICAgICAgICAgICAgICAgKiBAcGFyYW0gIHtVUkwucnVudGltZVByb3RvU3R1YlVSTH0gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVudGltZVByb3RvU3R1YlVSTCBydW50aW1lUHJvdG9TdWJVUkwKICAgICAgICAgICAgICAgICAqIEBwYXJhbSAge01lc3NhZ2UuTWVzc2FnZX0gICAgICAgICAgICAgICAgICAgICAgICAgICBidXNQb3N0TWVzc2FnZSAgICAgY29uZmlndXJhdGlvbgogICAgICAgICAgICAgICAgICogQHBhcmFtICB7UHJvdG9TdHViRGVzY3JpcHRvci5Db25maWd1cmF0aW9uRGF0YUxpc3R9IGNvbmZpZ3VyYXRpb24gICAgICBjb25maWd1cmF0aW9uCiAgICAgICAgICAgICAgICAgKi8KCiAgICAgICAgICAgICAgICBmdW5jdGlvbiBNYXRyaXhQcm90b1N0dWIocnVudGltZVByb3RvU3R1YlVSTCwgbWluaUJ1cywgY29uZmlndXJhdGlvbikgewogICAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgICAgICAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1hdHJpeFByb3RvU3R1Yik7CgogICAgICAgICAgICAgICAgICB0aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMID0gcnVudGltZVByb3RvU3R1YlVSTDsKICAgICAgICAgICAgICAgICAgdGhpcy5fcnVudGltZVVSTCA9IGNvbmZpZ3VyYXRpb24ucnVudGltZVVSTDsKICAgICAgICAgICAgICAgICAgdGhpcy5fY29uZmlndXJhdGlvbiA9IGNvbmZpZ3VyYXRpb247CiAgICAgICAgICAgICAgICAgIHRoaXMuX2J1cyA9IG1pbmlCdXM7CiAgICAgICAgICAgICAgICAgIHRoaXMuX2lkZW50aXR5ID0gbnVsbDsKICAgICAgICAgICAgICAgICAgdGhpcy5fd3MgPSBudWxsOwogICAgICAgICAgICAgICAgICB0aGlzLl9idXMuYWRkTGlzdGVuZXIoJyonLCBmdW5jdGlvbihtc2cpIHsKICAgICAgICAgICAgICAgICAgICBfdGhpcy5fYXNzdW1lT3BlbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgX3RoaXMuX3NlbmRXU01zZyhtc2cpOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgdGhpcy5fYXNzdW1lT3BlbiA9IGZhbHNlOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgICAgICogQ29ubmVjdCB0aGUgcHJvdG9jb2wgc3R1YiB0byB0aGUgYmFjay1lbmQgc2VydmVyLgogICAgICAgICAgICAgICAgICogQHBhcmFtICB7SURUb2tlbn0gaWRlbnRpdHkgaWRlbnRpdHkgLi4gdGhpcyBjYW4gYmUgZWl0aGVyIGFuIGlkdG9rZW4sCiAgICAgICAgICAgICAgICAgKiAgICAgICAgIG9yIGEgdXNlcm5hbWUvcGFzc3dvcmQgY29tYmluYXRpb24gdG8gYXV0aGVudGljYXRlIGFnYWluc3QgdGhlIE1hdHJpeCBIUwogICAgICAgICAgICAgICAgICovCgogICAgICAgICAgICAgICAgX2NyZWF0ZUNsYXNzKE1hdHJpeFByb3RvU3R1YiwgW3sKICAgICAgICAgICAgICAgICAga2V5OiAiY29ubmVjdCIsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBjb25uZWN0KGlkZW50aXR5KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAgICAgICAgICAgICAgIHRoaXMuX2lkZW50aXR5ID0gaWRlbnRpdHk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYXNzdW1lT3BlbiA9IHRydWU7CgogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgICAgICAgICAgICAgICAgICBpZiAoX3RoaXMyLl93cyAmJiBfdGhpczIuX3dzLnJlYWR5U3RhdGUgPT09IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShfdGhpczIuX3dzKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSBzb2NrZXQgdG8gdGhlIE1OCiAgICAgICAgICAgICAgICAgICAgICBfdGhpczIuX3dzID0gbmV3IFdlYlNvY2tldChfdGhpczIuX2NvbmZpZ3VyYXRpb24ubWVzc2FnaW5nbm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICBfdGhpczIuX3dzLm9ub3BlbiA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIuX29uV1NPcGVuKCk7CiAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgIC8vIG1lc3NhZ2UgaGFuZGxlciBmb3IgaW5pdGlhbCBoYW5kc2hha2Ugb25seQogICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLl93cy5vbm1lc3NhZ2UgPSBmdW5jdGlvbihtc2cpIHsKCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtID0gSlNPTi5wYXJzZShtc2cuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtLnJlc3BvbnNlID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpbnN0YWxsIGRlZmF1bHQgbXNnIGhhbmRsZXIsIHNlbmQgc3RhdHVzIGFuZCByZXNvbHZlCiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLl93cy5vbm1lc3NhZ2UgPSBmdW5jdGlvbihtKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIuX29uV1NNZXNzYWdlKG0pOwogICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMyLl9zZW5kU3RhdHVzKCJjb25uZWN0ZWQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKF90aGlzMi5fd3MpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi5fd3Mub25jbG9zZSA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIuX29uV1NDbG9zZSgpOwogICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICAgIF90aGlzMi5fd3Mub25lcnJvciA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICBfdGhpczIuX29uV1NFcnJvcigpOwogICAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAgICAgICAqIFRvIGRpc2Nvbm5lY3QgdGhlIHByb3RvY29sIHN0dWIuCiAgICAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICBrZXk6ICJkaXNjb25uZWN0IiwKICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRpc2Nvbm5lY3QoKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gc2VuZCBkaXNjb25uZWN0IGNvbW1hbmQgdG8gTU4gdG8gaW5kaWNhdGUgdGhhdCByZXNvdXJjZXMgZm9yIHRoaXMgcnVudGltZVVSTCBjYW4gYmUgY2xlYW5lZCB1cAogICAgICAgICAgICAgICAgICAgIC8vIHRoZSBjbG9zZSBvZiB0aGUgd2Vic29ja2V0IHdpbGwgYmUgaW5pdGlhdGVkIGZyb20gc2VydmVyIHNpZGUKICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZW5kV1NNc2coewogICAgICAgICAgICAgICAgICAgICAgY21kOiAiZGlzY29ubmVjdCIsCiAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJ1bnRpbWVVUkw6IHRoaXMuX3J1bnRpbWVVUkwKICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9hc3N1bWVPcGVuID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgICAgICAgKiBGaWx0ZXIgbWV0aG9kIHRoYXQgc2hvdWxkIGJlIHVzZWQgZm9yIGV2ZXJ5IG1lc3NhZ2VzIGluIGRpcmVjdGlvbjogUHJvdG9zdHViIC0+IE1lc3NhZ2VOb2RlCiAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSAge01lc3NhZ2V9IG1zZyBPcmlnaW5hbCBtZXNzYWdlIGZyb20gdGhlIE1lc3NhZ2VCdXMKICAgICAgICAgICAgICAgICAgICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiBpdCdzIHRvIGJlIGRlbGl2ZXIgaW4gdGhlIE1lc3NhZ2VOb2RlCiAgICAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICBrZXk6ICJfZmlsdGVyIiwKICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9maWx0ZXIobXNnKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKG1zZy5ib2R5ICYmIG1zZy5ib2R5LnZpYSA9PT0gdGhpcy5fcnVudGltZVByb3RvU3R1YlVSTCkgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgIGtleTogIl9zZW5kV1NNc2ciLAogICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3NlbmRXU01zZyhtc2cpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2ZpbHRlcihtc2cpKSB7CiAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fYXNzdW1lT3BlbikgdGhpcy5jb25uZWN0KCkudGhlbihmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMzLl93cy5zZW5kKEpTT04uc3RyaW5naWZ5KG1zZykpOwogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgIGtleTogIl9zZW5kU3RhdHVzIiwKICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZW5kU3RhdHVzKHZhbHVlLCByZWFzb24pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgbXNnID0gewogICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3VwZGF0ZScsCiAgICAgICAgICAgICAgICAgICAgICBmcm9tOiB0aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMLAogICAgICAgICAgICAgICAgICAgICAgdG86IHRoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwgKyAnL3N0YXR1cycsCiAgICAgICAgICAgICAgICAgICAgICBib2R5OiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZQogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlYXNvbikgewogICAgICAgICAgICAgICAgICAgICAgbXNnLmJvZHkuZGVzYyA9IHJlYXNvbjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIHRoaXMuX2J1cy5wb3N0TWVzc2FnZShtc2cpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgIGtleTogIl9vbldTT3BlbiIsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25XU09wZW4oKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2VuZFdTTXNnKHsKICAgICAgICAgICAgICAgICAgICAgIGNtZDogImNvbm5lY3QiLAogICAgICAgICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICAgICAgICBydW50aW1lVVJMOiB0aGlzLl9ydW50aW1lVVJMCiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIC8qKgogICAgICAgICAgICAgICAgICAgKiBNZXRob2QgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBkZWxpdmVyIHRoZSBtZXNzYWdlIGluIGRpcmVjdGlvbjogUHJvdG9zdHViIC0+IE1lc3NhZ2VCdXMgKGNvcmUpCiAgICAgICAgICAgICAgICAgICAqIEBwYXJhbSAge01lc3NhZ2V9IG1zZyBPcmlnaW5hbCBtZXNzYWdlIGZyb20gdGhlIE1lc3NhZ2VOb2RlCiAgICAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICBrZXk6ICJfZGVsaXZlciIsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZGVsaXZlcihtc2cpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIW1zZy5ib2R5KSBtc2cuYm9keSA9IHt9OwoKICAgICAgICAgICAgICAgICAgICBtc2cuYm9keS52aWEgPSB0aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMOwogICAgICAgICAgICAgICAgICAgIHRoaXMuX2J1cy5wb3N0TWVzc2FnZShtc2cpOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAvLyBwYXJzZSBtc2cgYW5kIGZvcndhcmQgaXQgbG9jYWxseSB0byBtaW5pQnVzCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgIGtleTogIl9vbldTTWVzc2FnZSIsCiAgICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25XU01lc3NhZ2UobXNnKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGVsaXZlcihKU09OLnBhcnNlKG1zZy5kYXRhKSk7CiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5fYnVzLnBvc3RNZXNzYWdlKEpTT04ucGFyc2UobXNnLmRhdGEpKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICBrZXk6ICJfb25XU0Nsb3NlIiwKICAgICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbldTQ2xvc2UoKSB7CiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZygid2Vic29ja2V0IGNsb3NlZCIpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuX3NlbmRTdGF0dXMoImRpc2Nvbm5lY3RlZCIpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgIGtleTogIl9vbldTRXJyb3IiLAogICAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX29uV1NFcnJvcihlcnIpIHsKICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygid2Vic29ja2V0IGVycm9yOiAiICsgZXJyKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfV0pOwoKICAgICAgICAgICAgICAgIHJldHVybiBNYXRyaXhQcm90b1N0dWI7CiAgICAgICAgICAgICAgfSkoKTsKCiAgICAgICAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUodXJsLCBidXMsIGNvbmZpZykgewogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgbmFtZTogJ01hdHJpeFByb3RvU3R1YicsCiAgICAgICAgICAgICAgICAgIGluc3RhbmNlOiBuZXcgTWF0cml4UHJvdG9TdHViKHVybCwgYnVzLCBjb25maWcpCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWyJkZWZhdWx0Il07CiAgICAgICAgICAgIH0sIHt9XQogICAgICAgICAgfSwge30sIFsxXSkoMSk7CiAgICAgICAgfSk7CgogICAgICB9KS5jYWxsKHRoaXMsIHR5cGVvZiBnbG9iYWwgIT09ICJ1bmRlZmluZWQiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICJ1bmRlZmluZWQiID8gc2VsZiA6IHR5cGVvZiB3aW5kb3cgIT09ICJ1bmRlZmluZWQiID8gd2luZG93IDoge30pCiAgICB9LCB7fV0KICB9LCB7fSwgWzFdKSgxKQp9KTsK",
      "sourceCodeClassname": "MatrixProtoStub",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": 40003,
    "type": "ProtoStubs",
    "version": "0.1",
    "description": "Description of MatrixProtoStub",
    "objectName": "MatrixProtoStub",
    "configuration": {
      "homeserver": "msg-node.rethink.tlabscloud.com",
      "messagingnode": "wss://msg-node.rethink.tlabscloud.com/stub/connect"
    },
    "constraints": "",
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy"
  },
  "hybroker.rethink.ptinovacao.pt": {
    "sourcePackage": {
      "sourceCode": "KGZ1bmN0aW9uKGYpe2lmKHR5cGVvZiBleHBvcnRzPT09Im9iamVjdCImJnR5cGVvZiBtb2R1bGUhPT0idW5kZWZpbmVkIil7bW9kdWxlLmV4cG9ydHM9ZigpfWVsc2UgaWYodHlwZW9mIGRlZmluZT09PSJmdW5jdGlvbiImJmRlZmluZS5hbWQpe2RlZmluZShbXSxmKX1lbHNle3ZhciBnO2lmKHR5cGVvZiB3aW5kb3chPT0idW5kZWZpbmVkIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09InVuZGVmaW5lZCIpe2c9Z2xvYmFsfWVsc2UgaWYodHlwZW9mIHNlbGYhPT0idW5kZWZpbmVkIil7Zz1zZWxmfWVsc2V7Zz10aGlzfWcuYWN0aXZhdGUgPSBmKCl9fSkoZnVuY3Rpb24oKXt2YXIgZGVmaW5lLG1vZHVsZSxleHBvcnRzO3JldHVybiAoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoIkNhbm5vdCBmaW5kIG1vZHVsZSAnIitvKyInIik7dGhyb3cgZi5jb2RlPSJNT0RVTEVfTk9UX0ZPVU5EIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PSJmdW5jdGlvbiImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pKHsxOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXsKJ3VzZSBzdHJpY3QnOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgewogIHZhbHVlOiB0cnVlCn0pOwoKdmFyIF9jcmVhdGVDbGFzcyA9IChmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoJ3ZhbHVlJyBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSkoKTsKCmV4cG9ydHNbJ2RlZmF1bHQnXSA9IGFjdGl2YXRlOwoKZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb24nKTsgfSB9Cgp2YXIgVmVydHhQcm90b1N0dWIgPSAoZnVuY3Rpb24gKCkgewogIC8qIHByaXZhdGUKICAgIF9jb250aW51b3VzT3BlbjogYm9vbGVhbgogICAgIF9ydW50aW1lUHJvdG9TdHViVVJMOiBzdHJpbmcKICAgIF9idXM6IE1pbmlCdXMKICAgIF9tc2dDYWxsYmFjazogKE1lc3NhZ2UpID0+IHZvaWQKICAgIF9jb25maWc6IHsgdXJsLCBydW50aW1lVVJMIH0KICAgICBfc29jazogKFdlYlNvY2tldCB8IFNvY2tKUykKICAgIF9yZU9wZW46IGJvb2xlYW4KICAqLwoKICAvKioKICAgKiBWZXJ0eCBQcm90b1N0dWIgY3JlYXRpb24KICAgKiBAcGFyYW0gIHtzdHJpbmd9IHJ1bnRpbWVQcm90b1N0dWJVUkwgLSBVUkwgdXNlZCBpbnRlcm5hbGx5IGZvciBtZXNzYWdlIGRlbGl2ZXJ5IHBvaW50LiBOb3QgdXNlZCBmb3IgTWVzc2FnZU5vZGUgZGVsaXZlci4KICAgKiBAcGFyYW0gIHtNaW5pQnVzfSBidXMgLSBNaW5pQnVzIHVzZWQgdG8gc2VuZC9yZWNlaXZlIG1lc3NhZ2VzLiBOb3JtYWxseSBjb25uZWN0ZWQgdG8gdGhlIE1lc3NhZ2VCdXMuCiAgICogQHBhcmFtICB7T2JqZWN0fSBjb25maWcgLSBNYW5kYXRvcnkgZmllbGRzIGFyZTogInVybCIgb2YgdGhlIE1lc3NhZ2VOb2RlIGFkZHJlc3MgYW5kICJydW50aW1lVVJMIi4KICAgKiBAcmV0dXJuIHtWZXJ0eFByb3RvU3R1Yn0KICAgKi8KCiAgZnVuY3Rpb24gVmVydHhQcm90b1N0dWIocnVudGltZVByb3RvU3R1YlVSTCwgYnVzLCBjb25maWcpIHsKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBWZXJ0eFByb3RvU3R1Yik7CgogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB0aGlzLl9pZCA9IDA7CiAgICB0aGlzLl9jb250aW51b3VzT3BlbiA9IHRydWU7CgogICAgdGhpcy5fcnVudGltZVByb3RvU3R1YlVSTCA9IHJ1bnRpbWVQcm90b1N0dWJVUkw7CiAgICB0aGlzLl9idXMgPSBidXM7CiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7CgogICAgdGhpcy5fcnVudGltZVNlc3Npb25VUkwgPSBjb25maWcucnVudGltZVVSTDsKICAgIHRoaXMuX3JlT3BlbiA9IGZhbHNlOwoKICAgIGJ1cy5hZGRMaXN0ZW5lcignKicsIGZ1bmN0aW9uIChtc2cpIHsKICAgICAgX3RoaXMuX29wZW4oZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChfdGhpcy5fZmlsdGVyKG1zZykpIHsKICAgICAgICAgIF90aGlzLl9zb2NrLnNlbmQoSlNPTi5zdHJpbmdpZnkobXNnKSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0pOwogIH0KCiAgLyoqCiAgICogR2V0IHRoZSBjb25maWd1cmF0aW9uIGZvciB0aGlzIFByb3RvU3R1YgogICAqIEByZXR1cm4ge09iamVjdH0gLSBNYW5kYXRvcnkgZmllbGRzIGFyZTogInVybCIgb2YgdGhlIE1lc3NhZ2VOb2RlIGFkZHJlc3MgYW5kICJydW50aW1lVVJMIi4KICAgKi8KCiAgX2NyZWF0ZUNsYXNzKFZlcnR4UHJvdG9TdHViLCBbewogICAga2V5OiAnY29ubmVjdCcsCgogICAgLyoqCiAgICAgKiBUcnkgdG8gb3BlbiB0aGUgY29ubmVjdGlvbiB0byB0aGUgTWVzc2FnZU5vZGUuIENvbm5lY3Rpb24gaXMgYXV0byBtYW5hZ2VkLCB0aGVyZSBpcyBubyBuZWVkIHRvIGNhbGwgdGhpcyBleHBsaWNpdGx5LgogICAgICogSG93ZXZlciwgaWYgImRpc2Nvbm5lY3QoKSIgaXMgY2FsbGVkLCBpdCdzIG5lY2Vzc2FyeSB0byBjYWxsIHRoaXMgdG8gZW5hYmxlIGNvbm5lY3Rpb25zIGFnYWluLgogICAgICogQSBzdGF0dXMgbWVzc2FnZSBpcyBzZW50IHRvICJydW50aW1lUHJvdG9TdHViVVJML3N0YXR1cyIsIGNvbnRhaW5pbmcgdGhlIHZhbHVlICJjb25uZWN0ZWQiIGlmIHN1Y2Nlc3NmdWwsIG9yICJkaXNjb25uZWN0ZWQiIGlmIHNvbWUgZXJyb3Igb2NjdXJzLgogICAgICovCiAgICB2YWx1ZTogZnVuY3Rpb24gY29ubmVjdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLl9jb250aW51b3VzT3BlbiA9IHRydWU7CiAgICAgIF90aGlzLl9vcGVuKGZ1bmN0aW9uICgpIHt9KTsKICAgIH0KCiAgICAvKioKICAgICAqIEl0IHdpbGwgZGlzY29ubmVjdCBhbmQgb3JkZXIgdG8gc3RheSBkaXNjb25uZWN0ZWQuIFJlY29ubmVjdGlvbiB0cmllcywgd2lsbCBub3QgYmUgYXR0ZW1wdGVkLCB1bmxlc3MgImNvbm5lY3QoKSIgaXMgY2FsbGVkLgogICAgICogQSBzdGF0dXMgbWVzc2FnZSBpcyBzZW50IHRvICJydW50aW1lUHJvdG9TdHViVVJML3N0YXR1cyIgd2l0aCB2YWx1ZSAiZGlzY29ubmVjdGVkIi4KICAgICAqLwogIH0sIHsKICAgIGtleTogJ2Rpc2Nvbm5lY3QnLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRpc2Nvbm5lY3QoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBfdGhpcy5fY29udGludW91c09wZW4gPSBmYWxzZTsKICAgICAgaWYgKF90aGlzLl9zb2NrKSB7CiAgICAgICAgX3RoaXMuX3NlbmRDbG9zZSgpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAnX3NlbmRPcGVuJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfc2VuZE9wZW4oY2FsbGJhY2spIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIF90aGlzLl9pZCsrOwogICAgICB2YXIgbXNnID0gewogICAgICAgIGlkOiBfdGhpcy5faWQsIHR5cGU6ICdvcGVuJywgZnJvbTogX3RoaXMuX3J1bnRpbWVTZXNzaW9uVVJMLCB0bzogJ21uOi9zZXNzaW9uJwogICAgICB9OwoKICAgICAgaWYgKF90aGlzLl9yZU9wZW4pIHsKICAgICAgICBtc2cudHlwZSA9ICdyZS1vcGVuJzsKICAgICAgfQoKICAgICAgLy9yZWdpc3RlciBhbmQgd2FpdCBmb3Igb3BlbiByZXBseS4uLgogICAgICB2YXIgaGFzUmVzcG9uc2UgPSBmYWxzZTsKICAgICAgX3RoaXMuX3Nlc3Npb25DYWxsYmFjayA9IGZ1bmN0aW9uIChyZXBseSkgewogICAgICAgIGlmIChyZXBseS50eXBlID09PSAncmVzcG9uc2UnICYgcmVwbHkuaWQgPT09IG1zZy5pZCkgewogICAgICAgICAgaGFzUmVzcG9uc2UgPSB0cnVlOwogICAgICAgICAgaWYgKHJlcGx5LmJvZHkuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIGlmIChyZXBseS5ib2R5LnJ1bnRpbWVUb2tlbikgewogICAgICAgICAgICAgIC8vc2V0dXAgcnVudGltZVNlc3Npb24KICAgICAgICAgICAgICBfdGhpcy5fcmVPcGVuID0gdHJ1ZTsKICAgICAgICAgICAgICBfdGhpcy5fcnVudGltZVNlc3Npb25VUkwgPSBfdGhpcy5fY29uZmlnLnJ1bnRpbWVVUkwgKyAnLycgKyByZXBseS5ib2R5LnJ1bnRpbWVUb2tlbjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgX3RoaXMuX3NlbmRTdGF0dXMoJ2Nvbm5lY3RlZCcpOwogICAgICAgICAgICBjYWxsYmFjaygpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXMuX3NlbmRTdGF0dXMoJ2Rpc2Nvbm5lY3RlZCcsIHJlcGx5LmJvZHkuZGVzYyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9OwoKICAgICAgX3RoaXMuX3NvY2suc2VuZChKU09OLnN0cmluZ2lmeShtc2cpKTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKCFoYXNSZXNwb25zZSkgewogICAgICAgICAgLy9ubyByZXNwb25zZSBhZnRlciB4IHNlY29uZHMuLi4KICAgICAgICAgIF90aGlzLl9zZW5kU3RhdHVzKCdkaXNjb25uZWN0ZWQnLCAnVGltZW91dCBmcm9tIG1uOi9zZXNzaW9uJyk7CiAgICAgICAgfQogICAgICB9LCAzMDAwKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdfc2VuZENsb3NlJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfc2VuZENsb3NlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgX3RoaXMuX2lkKys7CiAgICAgIHZhciBtc2cgPSB7CiAgICAgICAgaWQ6IF90aGlzLl9pZCwgdHlwZTogJ2Nsb3NlJywgZnJvbTogX3RoaXMuX3J1bnRpbWVTZXNzaW9uVVJMLCB0bzogJ21uOi9zZXNzaW9uJwogICAgICB9OwoKICAgICAgLy9pbnZhbGlkYXRlIHJ1bnRpbWVTZXNzaW9uCiAgICAgIF90aGlzLl9yZU9wZW4gPSBmYWxzZTsKICAgICAgX3RoaXMuX3J1bnRpbWVTZXNzaW9uVVJMID0gX3RoaXMuX2NvbmZpZy5fcnVudGltZVVSTDsKCiAgICAgIF90aGlzLl9zb2NrLnNlbmQoSlNPTi5zdHJpbmdpZnkobXNnKSk7CiAgICB9CiAgfSwgewogICAga2V5OiAnX3NlbmRTdGF0dXMnLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9zZW5kU3RhdHVzKHZhbHVlLCByZWFzb24pIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBtc2cgPSB7CiAgICAgICAgdHlwZTogJ3VwZGF0ZScsCiAgICAgICAgZnJvbTogX3RoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkwsCiAgICAgICAgdG86IF90aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMICsgJy9zdGF0dXMnLAogICAgICAgIGJvZHk6IHsKICAgICAgICAgIHZhbHVlOiB2YWx1ZQogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGlmIChyZWFzb24pIHsKICAgICAgICBtc2cuYm9keS5kZXNjID0gcmVhc29uOwogICAgICB9CgogICAgICBfdGhpcy5fYnVzLnBvc3RNZXNzYWdlKG1zZyk7CiAgICB9CiAgfSwgewogICAga2V5OiAnX3dhaXRSZWFkeScsCiAgICB2YWx1ZTogZnVuY3Rpb24gX3dhaXRSZWFkeShjYWxsYmFjaykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKF90aGlzLl9zb2NrLnJlYWR5U3RhdGUgPT09IDEpIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9IGVsc2UgewogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMuX3dhaXRSZWFkeShjYWxsYmFjayk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICdfZmlsdGVyJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZmlsdGVyKG1zZykgewogICAgICBpZiAobXNnLmJvZHkgJiYgbXNnLmJvZHkudmlhID09PSB0aGlzLl9ydW50aW1lUHJvdG9TdHViVVJMKSByZXR1cm4gZmFsc2U7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogJ19kZWxpdmVyJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfZGVsaXZlcihtc2cpIHsKICAgICAgaWYgKCFtc2cuYm9keSkgbXNnLmJvZHkgPSB7fTsKCiAgICAgIG1zZy5ib2R5LnZpYSA9IHRoaXMuX3J1bnRpbWVQcm90b1N0dWJVUkw7CiAgICAgIHRoaXMuX2J1cy5wb3N0TWVzc2FnZShtc2cpOwogICAgfQogIH0sIHsKICAgIGtleTogJ19vcGVuJywKICAgIHZhbHVlOiBmdW5jdGlvbiBfb3BlbihjYWxsYmFjaykgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKCF0aGlzLl9jb250aW51b3VzT3BlbikgewogICAgICAgIC8vVE9ETzogc2VuZCBzdGF0dXMgKHNlbnQgbWVzc2FnZSBlcnJvciAtIGRpc2Nvbm5lY3RlZCkKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICghX3RoaXMuX3NvY2spIHsKICAgICAgICBpZiAoX3RoaXMuX2NvbmZpZy51cmwuc3Vic3RyaW5nKDAsIDIpID09PSAnd3MnKSB7CiAgICAgICAgICBfdGhpcy5fc29jayA9IG5ldyBXZWJTb2NrZXQoX3RoaXMuX2NvbmZpZy51cmwpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy5fc29jayA9IG5ldyBTb2NrSlMoX3RoaXMuX2NvbmZpZy51cmwpOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMuX3NvY2sub25vcGVuID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMuX3NlbmRPcGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgY2FsbGJhY2soKTsKICAgICAgICAgIH0pOwogICAgICAgIH07CgogICAgICAgIF90aGlzLl9zb2NrLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB2YXIgbXNnID0gSlNPTi5wYXJzZShlLmRhdGEpOwogICAgICAgICAgaWYgKG1zZy5mcm9tID09PSAnbW46L3Nlc3Npb24nKSB7CiAgICAgICAgICAgIGlmIChfdGhpcy5fc2Vzc2lvbkNhbGxiYWNrKSB7CiAgICAgICAgICAgICAgX3RoaXMuX3Nlc3Npb25DYWxsYmFjayhtc2cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpcy5fZGVsaXZlcihtc2cpOwogICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIF90aGlzLl9zb2NrLm9uY2xvc2UgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgIHZhciByZWFzb24gPSB1bmRlZmluZWQ7CgogICAgICAgICAgLy9TZWUgaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzY0NTUjc2VjdGlvbi03LjQKICAgICAgICAgIGlmIChldmVudC5jb2RlID09PSAxMDAwKSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdOb3JtYWwgY2xvc3VyZSwgbWVhbmluZyB0aGF0IHRoZSBwdXJwb3NlIGZvciB3aGljaCB0aGUgY29ubmVjdGlvbiB3YXMgZXN0YWJsaXNoZWQgaGFzIGJlZW4gZnVsZmlsbGVkLic7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDEpIHsKICAgICAgICAgICAgcmVhc29uID0gJ0FuIGVuZHBvaW50IGlzIFwnZ29pbmcgYXdheVwnLCBzdWNoIGFzIGEgc2VydmVyIGdvaW5nIGRvd24gb3IgYSBicm93c2VyIGhhdmluZyBuYXZpZ2F0ZWQgYXdheSBmcm9tIGEgcGFnZS4nOwogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDAyKSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdBbiBlbmRwb2ludCBpcyB0ZXJtaW5hdGluZyB0aGUgY29ubmVjdGlvbiBkdWUgdG8gYSBwcm90b2NvbCBlcnJvcic7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDMpIHsKICAgICAgICAgICAgcmVhc29uID0gJ0FuIGVuZHBvaW50IGlzIHRlcm1pbmF0aW5nIHRoZSBjb25uZWN0aW9uIGJlY2F1c2UgaXQgaGFzIHJlY2VpdmVkIGEgdHlwZSBvZiBkYXRhIGl0IGNhbm5vdCBhY2NlcHQgKGUuZy4sIGFuIGVuZHBvaW50IHRoYXQgdW5kZXJzdGFuZHMgb25seSB0ZXh0IGRhdGEgTUFZIHNlbmQgdGhpcyBpZiBpdCByZWNlaXZlcyBhIGJpbmFyeSBtZXNzYWdlKS4nOwogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDA0KSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdSZXNlcnZlZC4gVGhlIHNwZWNpZmljIG1lYW5pbmcgbWlnaHQgYmUgZGVmaW5lZCBpbiB0aGUgZnV0dXJlLic7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDUpIHsKICAgICAgICAgICAgcmVhc29uID0gJ05vIHN0YXR1cyBjb2RlIHdhcyBhY3R1YWxseSBwcmVzZW50Lic7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMDYpIHsKICAgICAgICAgICAgcmVhc29uID0gJ1RoZSBjb25uZWN0aW9uIHdhcyBjbG9zZWQgYWJub3JtYWxseSwgZS5nLiwgd2l0aG91dCBzZW5kaW5nIG9yIHJlY2VpdmluZyBhIENsb3NlIGNvbnRyb2wgZnJhbWUnOwogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDA3KSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdBbiBlbmRwb2ludCBpcyB0ZXJtaW5hdGluZyB0aGUgY29ubmVjdGlvbiBiZWNhdXNlIGl0IGhhcyByZWNlaXZlZCBkYXRhIHdpdGhpbiBhIG1lc3NhZ2UgdGhhdCB3YXMgbm90IGNvbnNpc3RlbnQgd2l0aCB0aGUgdHlwZSBvZiB0aGUgbWVzc2FnZSAoZS5nLiwgbm9uLVVURi04IFtodHRwOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmMzNjI5XSBkYXRhIHdpdGhpbiBhIHRleHQgbWVzc2FnZSkuJzsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAwOCkgewogICAgICAgICAgICByZWFzb24gPSAnQW4gZW5kcG9pbnQgaXMgdGVybWluYXRpbmcgdGhlIGNvbm5lY3Rpb24gYmVjYXVzZSBpdCBoYXMgcmVjZWl2ZWQgYSBtZXNzYWdlIHRoYXQgInZpb2xhdGVzIGl0cyBwb2xpY3kiLiBUaGlzIHJlYXNvbiBpcyBnaXZlbiBlaXRoZXIgaWYgdGhlcmUgaXMgbm8gb3RoZXIgc3V0aWJsZSByZWFzb24sIG9yIGlmIHRoZXJlIGlzIGEgbmVlZCB0byBoaWRlIHNwZWNpZmljIGRldGFpbHMgYWJvdXQgdGhlIHBvbGljeS4nOwogICAgICAgICAgfSBlbHNlIGlmIChldmVudC5jb2RlID09PSAxMDA5KSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdBbiBlbmRwb2ludCBpcyB0ZXJtaW5hdGluZyB0aGUgY29ubmVjdGlvbiBiZWNhdXNlIGl0IGhhcyByZWNlaXZlZCBhIG1lc3NhZ2UgdGhhdCBpcyB0b28gYmlnIGZvciBpdCB0byBwcm9jZXNzLic7CiAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmNvZGUgPT09IDEwMTApIHsKICAgICAgICAgICAgcmVhc29uID0gJ0FuIGVuZHBvaW50IChjbGllbnQpIGlzIHRlcm1pbmF0aW5nIHRoZSBjb25uZWN0aW9uIGJlY2F1c2UgaXQgaGFzIGV4cGVjdGVkIHRoZSBzZXJ2ZXIgdG8gbmVnb3RpYXRlIG9uZSBvciBtb3JlIGV4dGVuc2lvbiwgYnV0IHRoZSBzZXJ2ZXIgZGlkblwndCByZXR1cm4gdGhlbSBpbiB0aGUgcmVzcG9uc2UgbWVzc2FnZSBvZiB0aGUgV2ViU29ja2V0IGhhbmRzaGFrZS4gPGJyIC8+IFNwZWNpZmljYWxseSwgdGhlIGV4dGVuc2lvbnMgdGhhdCBhcmUgbmVlZGVkIGFyZTogJyArIGV2ZW50LnJlYXNvbjsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAxMSkgewogICAgICAgICAgICByZWFzb24gPSAnQSBzZXJ2ZXIgaXMgdGVybWluYXRpbmcgdGhlIGNvbm5lY3Rpb24gYmVjYXVzZSBpdCBlbmNvdW50ZXJlZCBhbiB1bmV4cGVjdGVkIGNvbmRpdGlvbiB0aGF0IHByZXZlbnRlZCBpdCBmcm9tIGZ1bGZpbGxpbmcgdGhlIHJlcXVlc3QuJzsKICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQuY29kZSA9PT0gMTAxNSkgewogICAgICAgICAgICByZWFzb24gPSAnVGhlIGNvbm5lY3Rpb24gd2FzIGNsb3NlZCBkdWUgdG8gYSBmYWlsdXJlIHRvIHBlcmZvcm0gYSBUTFMgaGFuZHNoYWtlIChlLmcuLCB0aGUgc2VydmVyIGNlcnRpZmljYXRlIGNhblwndCBiZSB2ZXJpZmllZCkuJzsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJlYXNvbiA9ICdVbmtub3duIHJlYXNvbic7CiAgICAgICAgICB9CgogICAgICAgICAgZGVsZXRlIF90aGlzLl9zb2NrOwogICAgICAgICAgX3RoaXMuX3NlbmRTdGF0dXMoJ2Rpc2Nvbm5lY3RlZCcsIHJlYXNvbik7CiAgICAgICAgfTsKICAgICAgfSBlbHNlIHsKICAgICAgICBfdGhpcy5fd2FpdFJlYWR5KGNhbGxiYWNrKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogJ2NvbmZpZycsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZzsKICAgIH0KICB9LCB7CiAgICBrZXk6ICdydW50aW1lU2Vzc2lvbicsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX3J1bnRpbWVTZXNzaW9uVVJMOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFZlcnR4UHJvdG9TdHViOwp9KSgpOwoKZnVuY3Rpb24gYWN0aXZhdGUodXJsLCBidXMsIGNvbmZpZykgewogIHJldHVybiB7CiAgICBuYW1lOiAnVmVydHhQcm90b1N0dWInLAogICAgaW5zdGFuY2U6IG5ldyBWZXJ0eFByb3RvU3R1Yih1cmwsIGJ1cywgY29uZmlnKQogIH07Cn0KCi8qKgoqIENhbGxiYWNrIHVzZWQgdG8gc2VuZCBtZXNzYWdlcwoqIEBjYWxsYmFjayBQb3N0TWVzc2FnZQoqIEBwYXJhbSB7TWVzc2FnZX0gbXNnIC0gTWVzc2FnZSB0byBzZW5kCiovCm1vZHVsZS5leHBvcnRzID0gZXhwb3J0c1snZGVmYXVsdCddOwoKfSx7fV19LHt9LFsxXSkoMSkKfSk7",
      "sourceCodeClassname": "VertxProtoStub",
      "encoding": "base64",
      "signature": ""
    },
    "cguid": 40004,
    "type": "ProtoStubs",
    "version": "0.1",
    "description": "Description of VertxProtoStub",
    "objectName": "VertxProtoStub",
    "configuration": {
      "url": "wss://msg-node.hybroker.rethink.ptinovacao.pt/ws"
    },
    "constraints": "",
    "sourcePackageURL": "/sourcePackage",
    "language": "javascript",
    "signature": "",
    "messageSchemas": "",
    "dataObjects": [],
    "accessControlPolicy": "somePolicy"
  }
}
